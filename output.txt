add.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}
require('DBinfo.php');

$_SESSION['Crop']=$_POST['Crop'];
$_SESSION['hs']=$_POST['hs'];
?>

<!DOCTYPE html>
<html>
<head>
    <title>ADD Component</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        label {
            margin-bottom: 10px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="password"],
        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
        }

        input[type="text"]:focus,
        input[type="password"]:focus,
        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position:fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }
        .logout
        {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'manipulatedata.php';">&larr; Go Back</button>
        <h1 class="ol">ADD <?=$_SESSION['Crop']?> <?=$_SESSION['hs']?></h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>
<body>
    <div class="container">
        <h1>ADD <?=$_SESSION['Crop']?> <?=$_SESSION['hs']?></h1>
        <h4>Note:For Nutrient Defficiency Enter the same in both</h4>
        <form action="submit.php" method="POST">
            <label for="Name">Name:</label>
            <input type="text" name="Name" id="Name" pattern="[a-zA-Z0-9]+" required>

            <label for="pwd">Scientific Name:</label>
            <input type="text" name="SN" id="SN" pattern="[a-zA-Z0-9]+" required>
            <input type="submit" value="Submit">
        </form>
    </div>
</body>
</html>


addcrop.php

<?php
session_start();
require('DBinfo.php');

if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}

?>

<!DOCTYPE html>
<html>
<head>
    <title>Add Crop</title>
    <style>
        body {
            margin: 0;
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            background-color: whitesmoke;
            border: 2px solid rgba(72, 172, 76, 251);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
            text-align: center;
            max-width: 400px;
        }


        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        .form-button {
            margin-top: 20px;
        }

        .label-input-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
            text-align: left;
        }

        .label-input-container label {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .label-input-container input,
        .label-input-container select {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
            background-color: #fff;
            background-image: linear-gradient(to bottom, #f9f9f9, #e8e8e8);
        }

        .label-input-container select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 100%;
            padding-right: 30px;
        }

        .select-arrow {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            color: #888;
            pointer-events: none;
            font-size: 20px;
        }

        input[type="submit"] {
            background-color: rgb(7, 138, 7);
            border-radius: 15px;
            border: none;
            color: white;
            padding: 16px 32px;
            text-decoration: none;
            margin: 10px 0;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ADD CROP</h1>
        <div class="form-container">
            <form action="uploadcrop.php" method="POST">
                <div class="label-input-container">
                    <label for="crop_name">Crop Name</label>
                    <input type="text" id="cn" name="cn" required>
                </div>
                <input type="submit" value="Add" class="form-button">
            </form>
        </div>
    </div>
</body>
</html>


addusers.php

<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADD USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
            align-content: center;
        }

        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position:fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }
        .logout
        {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'manipulate.php';">&larr; Go Back</button>
        <h1 class="ol">Create New User</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>

<body>
    <div class="container">
        <h1>Select Privilage</h1>
        <form action="uploadusers.php" method="POST">
            <select id="usertype" name="usertype">
                <option value="User">User</option>
                <option value="Moderator">Approver</option>
                <option value="Admin">Admin</option>
            </select>
            <input type="submit" value="Submit">
        </form>
    </div>
</body>

</html>

AdminDisplay.css

html {
    background-color: cornsilk;
}
h1
{
    padding-left: 13vh;
}
.filters {
    display: flex;
    justify-content: center;
    align-content: center;
    text-align: center;
  }

.content th,
.content td {
    padding: auto;
    align-items: center;
    border: 2px solid black;
}

.heading {
    display: flex;
    align-self:center ;
    justify-content: space-between;
    border: 2px solid rgba(72, 172, 76, 251);
    background-color: rgba(74, 174, 78, 253);
    margin-top: 0;
    padding: 0.33em 9%;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
}

.content table {
    border-spacing: 2px;
    padding: 0%;
    margin-top: 30px;
    border: 2px solid black;
    margin-left:5vw;
    margin-right: 5vw;
    width: 90vw;
}

body {
    margin: 0%;
}

.butt1,
.butt2,
.butt3 {
    background-color: white;
    padding: 3%;
    border-radius: 10px;
    margin-bottom: 15px;
    display: inline-block;
}


.filters div {
    display: inline-block;
    align-items: center;
    margin-bottom: 10px;
}

.filters div label {
    margin-right: 10px;
}

.butt1:hover {
    background-color: green;
    color: white;
    cursor: pointer;

}

.butt2:hover {
    background-color: red;
    color: white;
    cursor: pointer;
}

.butt3:hover {
    background-color: #FFD700;
    color: cornsilk;
    cursor: pointer;

}

.button-container {
    text-align: center;
    margin-bottom: 20px;
}

.button-container button {
    margin-right: 10px;
}

button {
    background-color: rgb(54, 157, 63);
    padding: 0.23em 2%;
    color: white;
    font-size: 1em;
    border: none;
    transition: border 1ms;
}

button:hover {
    opacity: 0.7;
    cursor: pointer;
}

button:active {
    opacity: 0.5;
}

.filter-buttons {
    text-align: center;
    margin-top: 10px;
  }
  .filter-buttons button {
    display:inline-block;
    align-self: center;

  }
  
select {
    border-radius: 5px;
    border: 1px solid #ccc;
    background-color: #fff;
    background-image: linear-gradient(to bottom, #f9f9f9, #e8e8e8);
  }
label 
{
  font-weight: bold;
}


AdminDisplay.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
  header("location:index.php");
  exit;
}
require 'DBinfo.php';

// Get filter values from query parameters or set default values
$userFilter = isset($_GET['user']) ? $_GET['user'] : '';
$cropFilter = isset($_GET['crop']) ? $_GET['crop'] : '';
$monthFilter = isset($_GET['month']) ? $_GET['month'] : '';
$yearFilter = isset($_GET['year']) ? $_GET['year'] : '';
$stageFilter = isset($_GET['stage']) ? $_GET['stage'] : '';
$partsFilter = isset($_GET['parts']) ? $_GET['parts'] : '';
$seasonFilter = isset($_GET['season']) ? $_GET['season'] : '';
$stateFilter = isset($_GET['state']) ? $_GET['state'] : '';
$pordFilter = isset($_GET['pord']) ? $_GET['pord'] : '';

try {
  $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
  $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  // Build the SQL query with filters
  $sql = "SELECT * FROM permdb WHERE 1=1";

  if (!empty($userFilter)) {
    $sql .= " AND `User` = :user";
  }
  if (!empty($cropFilter)) {
    $sql .= " AND `CROP` = :crop";
  }
  if (!empty($monthFilter)) {
    $sql .= " AND `MONTH` = :month";
  }
  if (!empty($yearFilter)) {
    $sql .= " AND `YEAR` = :year";
  }
  if (!empty($stageFilter)) {
    $sql .= " AND `CROP STAGE` = :stage";
  }
  if (!empty($partsFilter)) {
    $sql .= " AND `PARTS-AFFECTED` = :parts";
  }
  if (!empty($seasonFilter)) {
    $sql .= " AND `SEASON` = :season";
  }
  if (!empty($stateFilter)) {
    $sql .= " AND `STATE` = :state";
  }
  if (!empty($pordFilter)) {
    $sql .= " AND `PORD` = :pord";
  }

  // Prepare the statement and bind filter values
  $stmt = $conn->prepare($sql);
  if (!empty($userFilter)) {
    $stmt->bindValue(':user', $userFilter);
  }
  if (!empty($cropFilter)) {
    $stmt->bindValue(':crop', $cropFilter);
  }
  if (!empty($monthFilter)) {
    $stmt->bindValue(':month', $monthFilter);
  }
  if (!empty($yearFilter)) {
    $stmt->bindValue(':year', $yearFilter);
  }
  if (!empty($stageFilter)) {
    $stmt->bindValue(':stage', $stageFilter);
  }
  if (!empty($partsFilter)) {
    $stmt->bindvalue(':parts', $partsFilter);
  }
  if (!empty($seasonFilter)) {
    $stmt->bindvalue(':season', $seasonFilter);
  }
  if (!empty($stateFilter)) {
    $stmt->bindValue(':state', $stateFilter);
  }
  if (!empty($pordFilter)) {
    $stmt->bindValue(':pord', $pordFilter);
  }

  $stmt->execute();

  $data = $stmt->fetchAll();
} catch (PDOException $e) {
  echo "Connection failed: " . $e->getMessage();
  exit;
}
?>
<!DOCTYPE html>
<html>

<head>
  <title>Approved Entries</title>
  <link rel="stylesheet" href="AdminDisplay.css">
  <meta charset="UTF-8">
</head>

<body>
  <div class="heading">
    <button onclick="window.location.href ='manipulate.php';">&#8249; Go Back</button>
    <center>
      <h1 class="h">Approved Entries</h1>
    </center>
    <button onclick="window.location.href = 'logout.php';">Logout</button>
  </div>

  <div class="side-panel">
    <div class="filters">
      <table>
        <tr>
          <th colspan="9">
            <h2>Filters</h2>
          </th>
        </tr>
        <tr>
          <td>
            <div>
              <label for="user-filter">USER</label>
            </div>
          </td>
          <td>
            <div>
              <label for="crop-filter">CROP</label>
            </div>
          </td>
          <td>
            <div>
              <label for="month-filter">MONTH</label>
            </div>
          </td>
          <td>
            <div>
              <label for="year-filter">YEAR</label>
            </div>
          </td>
          <td>
            <div>
              <label for="stage-filter">CROP STAGE</label>
            </div>
          </td>
          <td>
            <div>
              <label for="parts-filter">PARTS AFFECTED</label>
            </div>
          </td>
          <td>
            <div>
              <label for="season-filter">SEASON</label>
            </div>
          </td>
          <td>
            <div>
              <label for="state-filter">STATE</label>
            </div>
          </td>
          <td>
            <div>
              <label for="pord-filter">HEALTH STATE</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <div>
              <select id="user-filter" name="user">
                <option value="">All</option>
                <?php
                $userQuery = $conn->query("SELECT DISTINCT `User` FROM `permdb`");
                $userData = $userQuery->fetchAll();
                foreach ($userData as $user) {
                  $selected = ($_GET['user'] ?? '') == $user['User'] ? 'selected' : '';
                  echo "<option value=\"{$user['User']}\" $selected>{$user['User']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="crop-filter" name="crop">
                <option value="">All</option>
                <?php
                $cropQuery = $conn->query("SELECT DISTINCT `CROP` FROM `permdb`");
                $cropData = $cropQuery->fetchAll();
                foreach ($cropData as $crop) {
                  $selected = ($_GET['crop'] ?? '') == $crop['CROP'] ? 'selected' : '';
                  echo "<option value=\"{$crop['CROP']}\" $selected>{$crop['CROP']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="month-filter" name="month">
                <option value="">All</option>
                <?php
                $monthQuery = $conn->query("SELECT DISTINCT `MONTH` FROM `permdb`");
                $monthData = $monthQuery->fetchAll();
                foreach ($monthData as $month) {
                  $selected = ($_GET['month'] ?? '') == $month['MONTH'] ? 'selected' : '';
                  echo "<option value=\"{$month['MONTH']}\" $selected>{$month['MONTH']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="year-filter" name="year">
                <option value="">All</option>
                <?php
                $yearQuery = $conn->query("SELECT DISTINCT `YEAR` FROM `permdb`");
                $yearData = $yearQuery->fetchAll();
                foreach ($yearData as $year) {
                  $selected = ($_GET['year'] ?? '') == $year['YEAR'] ? 'selected' : '';
                  echo "<option value=\"{$year['YEAR']}\" $selected>{$year['YEAR']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="stage-filter" name="stage">
                <option value="">All</option>
                <?php
                $stageQuery = $conn->query("SELECT DISTINCT `CROP STAGE` FROM `permdb`");
                $stageData = $stageQuery->fetchAll();
                foreach ($stageData as $stage) {
                  $selected = ($_GET['stage'] ?? '') == $stage['CROP STAGE'] ? 'selected' : '';
                  echo "<option value=\"{$stage['CROP STAGE']}\" $selected>{$stage['CROP STAGE']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="parts-filter" name="parts">
                <option value="">All</option>
                <?php
                $partsQuery = $conn->query("SELECT DISTINCT `PARTS-AFFECTED` FROM `permdb`");
                $partsData = $partsQuery->fetchAll();
                foreach ($partsData as $parts) {
                  $selected = ($_GET['parts'] ?? '') == $parts['PARTS-AFFECTED'] ? 'selected' : '';
                  echo "<option value=\"{$parts['PARTS-AFFECTED']}\" $selected>{$parts['PARTS-AFFECTED']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="season-filter" name="season">
                <option value="">All</option>
                <?php
                $seasonQuery = $conn->query("SELECT DISTINCT `SEASON` FROM `permdb`");
                $seasonData = $seasonQuery->fetchAll();
                foreach ($seasonData as $season) {
                  $selected = ($_GET['season'] ?? '') == $season['SEASON'] ? 'selected' : '';
                  echo "<option value=\"{$season['SEASON']}\" $selected>{$season['SEASON']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="state-filter" name="state">
                <option value="">All</option>
                <?php
                $stateQuery = $conn->query("SELECT DISTINCT `STATE` FROM `permdb`");
                $stateData = $stateQuery->fetchAll();
                foreach ($stateData as $state) {
                  $selected = ($_GET['state'] ?? '') == $state['STATE'] ? 'selected' : '';
                  echo "<option value=\"{$state['STATE']}\" $selected>{$state['STATE']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="pord-filter" name="pord">
                <option value="">All</option>
                <?php
                $pordQuery = $conn->query("SELECT DISTINCT `PORD` FROM `permdb`");
                $pordData = $pordQuery->fetchAll();
                foreach ($pordData as $pord) {
                  $selected = ($_GET['pord'] ?? '') == $pord['PORD'] ? 'selected' : '';
                  echo "<option value=\"{$pord['PORD']}\" $selected>{$pord['PORD']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
        </tr>
        <div class="filter-buttons">
          <tr>
            <td colspan="4">
            </td>
            <td style="text-align: right;">
              <button onclick="applyFilters()" class="b1">Apply Filters</button>
            </td>
            <td colspan="4" style="text-align: left;">
              <button onclick="resetFilters()" class="b2">Reset Filters</button>
            </td>

          </tr>
      </table>
    </div>
    <div class="content">
      <table>
        <tr>
          <th>
            <h2 class="z">IMAGE Name</h2>
          </th>
          <th>
            <h2 class="z">CROP</h2>
          </th>
          <th>
            <h2 class="z">MONTH</h2>
          </th>
          <th>
            <h2 class="z">YEAR</h2>
          </th>
          <th>
            <h2 class="z">CROP STAGE</h2>
          </th>
          <th>
            <h2 class="z">STATE</h2>
          </th>
          <th>
            <h2 class="z">DEVICE</h2>
          </th>
          <th>
            <h2 class="z">PEST STAGE</h2>
          </th>
          <th rowspan="2">
            <h2 class="z">IMAGE</h2>
          </th>
        </tr>
        <tr>
          <th>
            <h2 class="z">SEASON</h2>
          </th>
          <th>
            <h2 class="z">PARTS AFFECTED</h2>
          </th>
          <th>
            <h2 class="z">HEALTH STATE</h2>
          </th>
          <th>
            <h2 class="z">AREA</h2>
          </th>
          <th>
            <h2 class="z">BACKGROUND</h2>
          </th>
          <th>
            <h2 class="z">SCI NAME</h2>
          </th>
          <th>
            <h2 class="z">IMAGE CONTENTS</h2>
          </th>
          <th>
            <h2 class="z">Click here to download</h2>
          </th>
        </tr>
        <?php foreach ($data as $row): ?>
          <?php
          $_SESSION['ID'] = $row['IName'];
          $id = $_SESSION['ID'];
          ?>
          <tr style="margin-top: 1%;">
            <td>
              <center>
                <?= $row['IName'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['CROP'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['MONTH'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['YEAR'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['CROP STAGE'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['STATE'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['DEVICE/SHOT'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['STAGE'] ?>
              </center>
            </td>
            <td rowspan="2">
              <img src="data:image/jpeg;base64,<?= base64_encode($row['IMAGE']) ?>" onclick="openFullscreenImage(this)"
                style="width: 200px; height: 200px; cursor: pointer;">
            </td>
          </tr>
          <tr>
            <td>
              <center>
                <?= $row['SEASON'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['PARTS-AFFECTED'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['PORD'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['AREA'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['BACKGROUND'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['PORDNAME'] ?>
              </center>
            </td>
            <td>
              <center>
                <?= $row['IMGCONTAINS'] ?>
              </center>
            </td>
            <td>
              <center>
                <form action="downloadone.php" method="POST">
                  <input type="hidden" name="id" value="<?= $id ?>">
                  <input class="butt1" type="submit" name="download" value="Download &#x2913;">
                </form>
                </center>
                </td>
                </tr>
                <tr>
            <td colspan="9">
              <center>
                <h3>Uploaded By:
                  <?= $row['User']; ?>
                </h3>
              </center>
            </td>
          </tr>
        <?php endforeach; ?>
      </table>
    </div>
    <script>
      function openFullscreenImage(img) {
        var fullscreen = document.createElement('div');
        fullscreen.style.position = 'fixed';
        fullscreen.style.top = 0;
        fullscreen.style.left = 0;
        fullscreen.style.width = '100%';
        fullscreen.style.height = '100%';
        fullscreen.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        fullscreen.style.display = 'flex';
        fullscreen.style.justifyContent = 'center';
        fullscreen.style.alignItems = 'center';
        fullscreen.style.zIndex = 9999;

        var imgElement = document.createElement('img');
        imgElement.src = img.src;
        imgElement.style.maxWidth = '90%';
        imgElement.style.maxHeight = '90%';

        fullscreen.appendChild(imgElement);
        fullscreen.onclick = function () {
          fullscreen.parentNode.removeChild(fullscreen);
        };

        document.body.appendChild(fullscreen);

        fullscreen.addEventListener('click', function () {
          document.body.removeChild(fullscreen);
        });
      }
      function applyFilters() {
        var userFilter = document.getElementById('user-filter').value;
        var cropFilter = document.getElementById('crop-filter').value;
        var monthFilter = document.getElementById('month-filter').value;
        var yearFilter = document.getElementById('year-filter').value;
        var stageFilter = document.getElementById('stage-filter').value;
        var partsFilter = document.getElementById('parts-filter').value;
        var seasonFilter = document.getElementById('season-filter').value;
        var stateFilter = document.getElementById('state-filter').value;
        var pordFilter = document.getElementById('pord-filter').value;
        var url = 'AdminDisplay.php';

        if (userFilter || cropFilter || monthFilter || yearFilter || stageFilter || partsFilter || seasonFilter || stateFilter || pordFilter) {
          url += '?';
          if (userFilter) {
            url += 'user=' + userFilter + '&';
          }
          if (cropFilter) {
            url += 'crop=' + cropFilter + '&';
          }
          if (monthFilter) {
            url += 'month=' + monthFilter + ' & ';
          }
          if (yearFilter) {
            url += 'year=' + yearFilter + '&';  // Include the year filter
          }
          if (stageFilter) {
            url += 'stage=' + stageFilter + '&';
          }
          if (partsFilter) {
            url += 'parts=' + partsFilter + '&';
          }
          if (seasonFilter) {
            url += 'season=' + seasonFilter + '&';
          }
          if (stateFilter) {
            url += 'state=' + stateFilter + ' & ';
          }
          if (pordFilter) {
            url += 'pord=' + pordFilter + '&';
          }
          // Remove the trailing '&' from the URL
          url = url.slice(0, -1);
        }

        // Redirect to the filtered URL
        window.location.href = url;
      }


      function resetFilters() {
        window.location.href = 'AdminDisplay.php';
      }
    </script>
</body>

</html>

bitnami.css

.module_top, .module_bottom{
  visibility: hidden;
}

table {
  border: 0px !important;
}

.module_content img{
  min-width: 70px;
}

.module_content h2{
  font-size: 30px;
}




castorpests.php

<html>
    <head>
        <title> CROP DATA </title>
    </head>
    <body>
    <?php
    $servername = "localhost";
    $username = "root";
    $password = "";

    $dropcrop = "DROP TABLE crop";
                                                                            
    $createcastor= "CREATE TABLE castorpests(Id int(25) NOT NULL primary key, PName VARCHAR(30) NOT NULL, SCName Varchar(30) NOT NULL)";

    
    $castorinsert = "INSERT INTO castorpests VALUES (101,'Red Hairy Catterpillar', 'Amsacta albistriga Walker'),
                                            (102,'Castor semilooper','Achoea janata Linnaeus'),
                                            (103,'Tobacco caterpillar','Spodoptera litura (Fabr)'),
                                            (104,'Shoot and Capsule borer','Conogethes (Dichocrosis) punctiferalis'),
                                            (105,'Leaf hopper','Empoasca flavescens (Fabr)'),
                                            (106,'Thrips', 'Retithrips syriacus (Mayet)'),
                                            (107,'Whitefly','Trialeurodes ricini (Misra)'),
                                            (108,'Serpentine leaf miner','Liriomyza trifolii Burgess'),
                                            (109,'Bihar Hairy caterpillar','Spilosoma (Diacrisia) obliqua wlk.'),
                                            (110,'Red spider mite','Tetranychus telarious L.') ";

    $displaycastor = "SELECT * FROM castorpests";

    $conn = new mysqli($servername, $username, $password);

    if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
    }
    
    //use database
    $sql = "USE myDB";
    if ($conn->query($sql) === TRUE) 
    {
        echo "Database in use";
    } 
    else 
    {
        echo "Error connecting to database: " . $conn->error;
    }  
    
    //create table
    /*
    if($conn->query($createcastor) == TRUE)
    {
        echo "Table created successfully";
    }
    else 
    {
        echo "Error creating table: " . $conn->error;
    }
    

    //insert data
    if($conn->query($castorinsert)==TRUE)
    {
        echo "Inserted into table successfully";
    }
    else 
    {
        echo "Error inserting data into CROP";
    }
    */
    //dislpay details   
    $result = $conn->query($displaycastor);
    
    while($row = $result->fetch_assoc()) 
        echo "Id: " . $row["Id"]. " - pest: " . $row["PName"]. " - Scientific Name" . $row["SCName"] . "<br>";    
    ?>

    </body>
</html>

Dash.php

<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <style>
        body {
            background-color: cornsilk;
        }

        button {
            background-color: rgb(7, 138, 7);
            padding: 0.23em 2%;
            color: white;
            border-radius: 15px;
            font-size: 1em;
            padding: 16px 20px;
            border: none;
            transition: border 1ms;
            margin: 10px 0 0;
            cursor: pointer;
        }
        header {
            display: flex;
            justify-content: space-between;
            background-color: #4AAE4E;
            text-align: center;
            margin-top: 0;
            padding: 2%;
            max-height: min-content;
        }

        h1 {
            margin-right: 45%;
        }

        h2 {
            text-align: center;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            align: center;
            gap: 20px;
            margin: 0 auto;
            max-width: max-content;
        }

        .chart-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            text-align: center;
            max-width: 400px;
        }

        table {
            border-collapse: collapse;
            border: 1px solid black;
            width: 300px;
            align-self: center;
        }

        th,
        td {
            border: 1px solid black;
            padding: 5px;
            text-align: left;
        }

        canvas {
            width: 300px;
            height: 300px;
        }
        #filtered-table {
        margin: 0 auto;
        text-align: center;
        width:100%;

    }

    #filtered-table th,
    #filtered-table tr {
        vertical-align: top;
    }
    .filter
    {
        margin-left: 10vh;
    }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function applyFilters() {
            var cropSelect = document.getElementById("crop-select");
            var pordSelect = document.getElementById("pord-select");

            var cropFilter = cropSelect.options[cropSelect.selectedIndex].value;
            var pordFilter = pordSelect.options[pordSelect.selectedIndex].value;

            fetchFilteredData(cropFilter, pordFilter);
        }

        function fetchFilteredData(cropFilter, pordFilter) {
            var table = document.getElementById("filtered-table");

            // Clear previous data
            table.innerHTML = "<tr><th>CROP</th><th>Classification</th><th>Scientific Name</th><th>Count</th></tr>";

            // Fetch filtered data
            fetch("fetch_filtered_data.php?crop=" + cropFilter + "&pord=" + pordFilter)
                .then(response => response.json())
                .then(data => {
                    if (data.length === 0) {
                        table.innerHTML += "<tr><td colspan='4'>N/A</td></tr>";
                    } else {
                        data.forEach(row => {
                            table.innerHTML += "<tr><td>" + row.CROP + "</td><td>" + row.PORD + "</td><td>" + row.PORDNAME + "</td><td>" + row.count + "</td></tr>";
                        });
                    }
                });
        }
    </script>
</head>
<body>
    <header>
        <button onclick="window.location.href = 'index.php';">&#x3c Back</button>
        <h1>Dashboard</h1>
    </header>
    <?php
    // Step 1: Connect to the database
    require 'DBinfo.php';

    $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    // Step 0: Display total image count
    $query = "SELECT COUNT(*) as total FROM permdb";
    $stmt = $conn->prepare($query);
    $stmt->execute();
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    $totalImages = $result['total'];
    echo "<h2>Total Number of Images: $totalImages</h2>
    <div class='container'>";

    // Function to generate table and chart
    function generateTableAndChart($conn, $columnName, $tableName)
    {
        // Step 2: Retrieve data from the database
        $query = "SELECT $columnName, COUNT(*) as count FROM $tableName GROUP BY $columnName";
        $stmt = $conn->prepare($query);
        $stmt->execute();
        $data = $stmt->fetchAll(PDO::FETCH_ASSOC);

        // Step 3: Create the table and chart
        ?>
        <tr>
        <th colspan="2"><?= $columnName === 'PORD' ? 'Classification' : ($columnName === 'User' ? 'Contributors' : $columnName) ?></th>
        </tr>
        <tr>
            <td>
                <div class='chart-container'>
                    <table>
                        <tr>
                            <th><?= $columnName ?></th>
                            <th>Count</th>
                        </tr>
                        <?php foreach ($data as $row) : ?>
                            <tr>
                                <td><?= $row[$columnName] ?></td>
                                <td><?= $row['count'] ?></td>
                            </tr>
                        <?php endforeach; ?>
                    </table>
                </div>
            </td>
            <td>
                <div class='chart-container'>
                    <canvas id='<?= $columnName ?>-chart'></canvas>
                </div>
                <script>
                    var ctx = document.getElementById('<?= $columnName ?>-chart').getContext('2d');
                    var data = {
                        labels: [
                            <?php foreach ($data as $row) : ?>
                                '<?= $row[$columnName] ?>',
                            <?php endforeach; ?>
                        ],
                        datasets: [{
                            data: [
                                <?php foreach ($data as $row) : ?>
                                    <?= $row['count'] ?>,
                                <?php endforeach; ?>
                            ],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.6)',
                                'rgba(54, 162, 235, 0.6)',
                                'rgba(75, 192, 192, 0.6)',
                                'rgba(255, 206, 86, 0.6)',
                                'rgba(153, 102, 255, 0.6)',
                                'rgba(255, 159, 64, 0.6)'
                            ]
                        }]
                    };
                    var options = {
                        responsive: true,
                        maintainAspectRatio: false
                    };
                    new Chart(ctx, {
                        type: 'pie',
                        data: data,
                        options: options
                    });
                </script>
            </td>
        </tr>
    <?php
    }

    // Step 5: Generate tables and charts
    ?>
    <table>
        <tr>
            <td>
                <table>
                    <?php generateTableAndChart($conn, 'User', 'permdb') ?>
                </table>
            </td>
            <td>
                <table>
                    <?php generateTableAndChart($conn, 'PORD', 'permdb') ?>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table>
                    <?php generateTableAndChart($conn, 'CROP', 'permdb') ?>
                </table>
            </td>
            <td>
                <table id="filtered-table">
                    <tr>
                        <div class="filter">
                    <label for="crop-select">CROP:</label>
                    <select id="crop-select">
                        <option value="">All</option>
                        <?php
                        $query = "SELECT DISTINCT CROP FROM permdb";
                        $stmt = $conn->prepare($query);
                        $stmt->execute();
                        $crops = $stmt->fetchAll(PDO::FETCH_ASSOC);

                        foreach ($crops as $crop) {
                            echo "<option value='" . $crop['CROP'] . "'>" . $crop['CROP'] . "</option>";
                        }
                        ?>
                    </select>

                    <label for="pord-select">Classification:</label>
                    <select id="pord-select">
                        <option value="">All</option>
                        <?php
                        $query = "SELECT DISTINCT PORD FROM permdb";
                        $stmt = $conn->prepare($query);
                        $stmt->execute();
                        $pords = $stmt->fetchAll(PDO::FETCH_ASSOC);

                        foreach ($pords as $pord) {
                            echo "<option value='" . $pord['PORD'] . "'>" . $pord['PORD'] . "</option>";
                        }
                        ?>
                    </select>

                    <button onclick="applyFilters()">Apply</button>
                    </div>
                    </tr>
                    <tr>
                        <th>CROP</th>
                        <th>Classification</th>
                        <th>Scientific Name</th>
                        <th>Count</th>
                    </tr>
                </table>

            </td>
        </tr>
    </table>


    <?php

    // Step 6: Close the database connection
    $conn = null;
    ?>
    </div>

</body>

</html>


DBinfo.php

<?php
    $servername = "db";
    $username = "iior";
    $password = "KlIiorSite#723";
    $conn = new mysqli('db', 'iior', 'KlIiorSite#723', 'mydb');
    $UDB = "USE mydb";
    $dbname='mydb';
    $conn->query($UDB);
    ?>


DeleteUsers.php

<?php
session_start();

if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}
$ut=$_SESSION['usertype'];
$usr=$_POST['user'];
require('DBinfo.php');
$query = "DELETE FROM $ut WHERE Uid= ?";
$stmt = $conn->prepare($query);
$stmt->bind_param("s",$usr );

$stmt->execute(); ?>
<html>

<body>
    <style>
        html {
            background-color: cornsilk;
        }

        h1 {
            margin-top: 15%;
        }

        div {
            background-color: white;
            width: 20%;
            height: 20%;
            border-radius: 5%;
        }

        .button {
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            background-color: rgb(7, 138, 7);
            color: white;
            border: solid;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 6%
        }

        button:hover {
            opacity: 0.7;
        }

        button:active {
            opacity: 0.6;
        }
    </style>
    <center>
        <h1>
            <?php 
            if ($stmt->affected_rows > 0) {
                echo "Record deleted successfully.";
            } else {
                echo "Error deleting record. Query: " . $query . ". Error: " . $stmt->error;
            }

            $stmt->close();
            $conn->close();
            ?>

        </h1>
        <div>
            <h2 class="a"><a href="manipulate.php" class="button">Home</a></h2>
            <h2 class="a"><a href="logout.php" class="button">Logout</a></h2>
        </div>
    </center>
</body>

</html>

DelSel.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
  header("location:index.php");
  exit;
}
$_SESSION['Crop'] = $_POST['Crop'];
$_SESSION['hs'] = $_POST['hs'];
require('DBinfo.php');
?>

<!DOCTYPE html>
<html>

<head>
  <title>Finish Deletion</title>
  <style>
    body {
      background: cornsilk;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .container {
      border: 2px solid rgba(72, 172, 76, 251);
      background-color: whitesmoke;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
      text-align: center;
    }

    h1 {
      margin-bottom: 20px;
    }

    h2 {
      margin-bottom: 20px;
    }

    select,
    button {
      display: block;
      margin: 10px auto;
      padding: 10px 20px;
      font-size: 16px;
      background-color: rgba(74, 174, 78, 253);
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: rgba(74, 174, 78, 0.8);
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>Select <?=$_SESSION['hs']?> to Delete</h2>
    <form action="finishdeletion.php" method="post">
      <select id="TBD" name="TBD">
      <?php
                if ($_SESSION['hs'] != 'ND') {
                    $c = $_SESSION['Crop'] . $_SESSION['hs'];
                    $C = "SELECT * FROM $c";
                    if ($result = $conn->query($C)) {
                        while ($row = $result->fetch_assoc()) {
                            $PName = $row["PName"];
                            $SName = $row["SCName"];
                            echo '<option value=' . urlencode($PName) . '>' . $PName . '</option>';
                        }
                        $result->free();
                    }
                } else {
                    $stmt = $conn->query("SELECT * FROM nutrients");
                    while ($row = $stmt->fetch_assoc()) {
                        $o = $row['name'];
                        echo '<option value=' . urlencode($o) . '>' . $o . '</option> ';
                    }
                    $stmt->free_result();
                }
                ?>
      </select>
      <button type="submit" name="updatechange" onclick="return confirm('Are you sure you want to delete this?')">DELETE</button>
    </form>
  </div>
</body>

</html>

DelUsers.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}
require('DBinfo.php');

$_SESSION['usertype'] = $_POST['usertype'];
?>

<!DOCTYPE html>
<html>
<head>
    <title>Remove USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        label {
            margin-bottom: 10px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="password"],
        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
        }

        input[type="text"]:focus,
        input[type="password"]:focus,
        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position:fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }
        .logout
        {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'removeuser.php';">&larr; Go Back</button>
        <h1 class="ol">Remove Existing User</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>
<body>
<div class="container">
    <h1>Select User To Delete</h1>
    <form action="DeleteUsers.php" method="POST">
        <div>
            <select id="user" name="user">
           <?php 
           $query = "SELECT * FROM ".$_SESSION['usertype'];
                $result = $conn->query($query);

                // Check if the query was successful
                foreach ($result as $row) {
                        $uid = $row['Uid'];
                        echo "<option value='$uid'>".$uid."</option>";
                    }
                    $result->free();
                ?>
            </select>
        </div>
        <input type="submit" value="DELETE" onclick="confirm">
    </form>
</div>

</body>
</html>

display.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
  header("location:index.php");
  exit;
}
$string = $_SESSION['spz'];
$pattern = '/(.+)(pest|disease)/';

if (preg_match($pattern, $string, $matches)) {
  $b = $matches[1];
  $pe = $matches[2];
} else {
  echo "No match found.";
}

require 'DBinfo.php';

// Get filter values from query parameters or set default values
$userFilter = isset($_GET['user']) ? $_GET['user'] : '';
$cropFilter = isset($_GET['crop']) ? $_GET['crop'] : '';
$monthFilter = isset($_GET['month']) ? $_GET['month'] : '';
$yearFilter = isset($_GET['year']) ? $_GET['year'] : '';
$stageFilter = isset($_GET['stage']) ? $_GET['stage'] : '';
$partsFilter = isset($_GET['parts']) ? $_GET['parts'] : '';
$seasonFilter = isset($_GET['season']) ? $_GET['season'] : '';
$stateFilter = isset($_GET['state']) ? $_GET['state'] : '';
$pordFilter = isset($_GET['pord']) ? $_GET['pord'] : '';

try {
  $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
  $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  // Build the SQL query with filters
  $sql = "SELECT * FROM tempdb WHERE 1=1";

  if (!empty($userFilter)) {
    $sql .= " AND `User` = :user";
  }
  if (!empty($cropFilter)) {
    $sql .= " AND `CROP` = :crop";
  }
  if (!empty($monthFilter)) {
    $sql .= " AND `MONTH` = :month";
  }
  if (!empty($yearFilter)) {
    $sql .= " AND `YEAR` = :year";
  }
  if (!empty($stageFilter)) {
    $sql .= " AND `CROP STAGE` = :stage";
  }
  if (!empty($partsFilter)) {
    $sql .= " AND `PARTS-AFFECTED` = :parts";
  }
  if (!empty($seasonFilter)) {
    $sql .= " AND `SEASON` = :season";
  }
  if (!empty($stateFilter)) {
    $sql .= " AND `STATE` = :state";
  }
  if (!empty($pordFilter)) {
    $sql .= " AND `PORD` = :pord";
  }

  // Prepare the statement and bind filter values
  $stmt = $conn->prepare($sql);
  if (!empty($userFilter)) {
    $stmt->bindValue(':user', $userFilter);
  }
  if (!empty($cropFilter)) {
    $stmt->bindValue(':crop', $cropFilter);
  }
  if (!empty($monthFilter)) {
    $stmt->bindValue(':month', $monthFilter);
  }
  if (!empty($yearFilter)) {
    $stmt->bindValue(':year', $yearFilter);
  }
  if (!empty($stageFilter)) {
    $stmt->bindValue(':stage', $stageFilter);
  }
  if (!empty($partsFilter)) {
    $stmt->bindvalue(':parts', $partsFilter);
  }
  if (!empty($seasonFilter)) {
    $stmt->bindvalue(':season', $seasonFilter);
  }
  if (!empty($stateFilter)) {
    $stmt->bindValue(':state', $stateFilter);
  }
  if (!empty($pordFilter)) {
    $stmt->bindValue(':pord', $pordFilter);
  }

  $stmt->execute();

  $data = $stmt->fetchAll();
} catch (PDOException $e) {
  echo "Connection failed: " . $e->getMessage();
  exit;
}
?>

<!DOCTYPE html>
<html>

<head>
  <title>Approver</title>
  <link rel="stylesheet" href="AdminDisplay.css">
  <meta charset="UTF-8">
</head>

<body>

  <div class='heading'>
    <div></div>
    <center>
      <h1 class="h">Approver</h1>
    </center>
    <button onclick="window.location.href = 'logout.php';">Logout</button>
  </div>

  <div class="side-panel">
    <div class="filters">
      <table>
        <tr>
          <th colspan="9">
            <h2>Filters</h2>
          </th>
        </tr>
        <tr>
          <td>
            <div>
              <label for="user-filter">USER</label>
            </div>
          </td>
          <td>
            <div>
              <label for="crop-filter">CROP</label>
            </div>
          </td>
          <td>
            <div>
              <label for="month-filter">MONTH</label>
            </div>
          </td>
          <td>
            <div>
              <label for="year-filter">YEAR</label>
            </div>
          </td>
          <td>
            <div>
              <label for="stage-filter">CROP STAGE</label>
            </div>
          </td>
          <td>
            <div>
              <label for="parts-filter">PARTS AFFECTED</label>
            </div>
          </td>
          <td>
            <div>
              <label for="season-filter">SEASON</label>
            </div>
          </td>
          <td>
            <div>
              <label for="state-filter">STATE</label>
            </div>
          </td>
          <td>
            <div>
              <label for="pord-filter">HEALTH STATE</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <div>
              <select id="user-filter" name="user">
                <option value="">All</option>
                <?php
                $userQuery = $conn->query("SELECT DISTINCT `User` FROM `tempdb`");
                $userData = $userQuery->fetchAll();
                foreach ($userData as $user) {
                  $selected = ($_GET['user'] ?? '') == $user['User'] ? 'selected' : '';
                  echo "<option value=\"{$user['User']}\" $selected>{$user['User']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="crop-filter" name="crop">
                <option value=<?php echo $b; ?>><?php echo $b; ?></option>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="month-filter" name="month">
                <option value="">All</option>
                <?php
                $monthQuery = $conn->query("SELECT DISTINCT `MONTH` FROM `tempdb`");
                $monthData = $monthQuery->fetchAll();
                foreach ($monthData as $month) {
                  $selected = ($_GET['month'] ?? '') == $month['MONTH'] ? 'selected' : '';
                  echo "<option value=\"{$month['MONTH']}\" $selected>{$month['MONTH']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="year-filter" name="year">
                <option value="">All</option>
                <?php
                $yearQuery = $conn->query("SELECT DISTINCT `YEAR` FROM `tempdb`");
                $yearData = $yearQuery->fetchAll();
                foreach ($yearData as $year) {
                  $selected = ($_GET['year'] ?? '') == $year['YEAR'] ? 'selected' : '';
                  echo "<option value=\"{$year['YEAR']}\" $selected>{$year['YEAR']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="stage-filter" name="stage">
                <option value="">All</option>
                <?php
                $stageQuery = $conn->query("SELECT DISTINCT `CROP STAGE` FROM `tempdb`");
                $stageData = $stageQuery->fetchAll();
                foreach ($stageData as $stage) {
                  $selected = ($_GET['stage'] ?? '') == $stage['CROP STAGE'] ? 'selected' : '';
                  echo "<option value=\"{$stage['CROP STAGE']}\" $selected>{$stage['CROP STAGE']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="parts-filter" name="parts">
                <option value="">All</option>
                <?php
                $partsQuery = $conn->query("SELECT DISTINCT `PARTS-AFFECTED` FROM `tempdb`");
                $partsData = $partsQuery->fetchAll();
                foreach ($partsData as $parts) {
                  $selected = ($_GET['parts'] ?? '') == $parts['PARTS-AFFECTED'] ? 'selected' : '';
                  echo "<option value=\"{$parts['PARTS-AFFECTED']}\" $selected>{$parts['PARTS-AFFECTED']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="season-filter" name="season">
                <option value="">All</option>
                <?php
                $seasonQuery = $conn->query("SELECT DISTINCT `SEASON` FROM `tempdb`");
                $seasonData = $seasonQuery->fetchAll();
                foreach ($seasonData as $season) {
                  $selected = ($_GET['season'] ?? '') == $season['SEASON'] ? 'selected' : '';
                  echo "<option value=\"{$season['SEASON']}\" $selected>{$season['SEASON']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="state-filter" name="state">
                <option value="">All</option>
                <?php
                $stateQuery = $conn->query("SELECT DISTINCT `STATE` FROM `tempdb`");
                $stateData = $stateQuery->fetchAll();
                foreach ($stateData as $state) {
                  $selected = ($_GET['state'] ?? '') == $state['STATE'] ? 'selected' : '';
                  echo "<option value=\"{$state['STATE']}\" $selected>{$state['STATE']}</option>";
                }
                ?>
              </select>
            </div>
          </td>
          <td>
            <div>
              <select id="pord-filter" name="pord">
                <option value=<?php echo $pe; ?>><?php echo $pe; ?></option>
              </select>
            </div>
          </td>
        </tr>
        <div class="filter-buttons">
          <tr>
            <td colspan="4">
            </td>
            <td style="text-align: right;">
              <button onclick="applyFilters()" class="b1">Apply Filters</button>
            </td>
            <td colspan="4" style="text-align: left;">
              <button onclick="resetFilters()" class="b2">Reset Filters</button>
            </td>

          </tr>
      </table>
    </div>
  </div>
  <div class="content">
    <table>
      <tr>
        <th>
          <h2 class="z">IMAGE Name</h2>
        </th>
        <th>
          <h2 class="z">CROP</h2>
        </th>
        <th>
          <h2 class="z">MONTH</h2>
        </th>
        <th>
          <h2 class="z">YEAR</h2>
        </th>
        <th>
          <h2 class="z">CROP STAGE</h2>
        </th>
        <th>
          <h2 class="z">STATE</h2>
        </th>
        <th>
          <h2 class="z">DEVICE</h2>
        </th>
        <th>
          <h2 class="z">PEST STAGE</h2>
        </th>
        <th rowspan='2'>
          <h2 class="z">IMAGE</h2>
        </th>
      </tr>
      <tr>
        <th>
          <h2 class="z">SEASON</h2>
        </th>
        <th>
          <h2 class="z">PARTS AFFECTED</h2>
        </th>
        <th>
          <h2 class="z">HEALTH STATE</h2>
        </th>
        <th>
          <h2 class="z">AREA</h2>
        </th>
        <th>
          <h2 class="z">BACKGROUND</h2>
        </th>
        <th>
          <h2 class="z">SCI NAME</h2>
        </th>
        <th>
          <h2 class="z">IMAGE CONTENTS</h2>
        </th>
        <th>
          <h2 class="z">Actions</h2>
        </th>
      </tr>
      <?php foreach ($data as $row): ?>
        <?php
        $_SESSION['ID'] = $row['IName'];
        $id = $_SESSION['ID'];
        ?>
        <tr style="margin-top: 1%;">
          <td>
            <center>
              <?= $row['IName'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['CROP'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['MONTH'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['YEAR'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['CROP STAGE'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['STATE'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['DEVICE/SHOT'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['STAGE'] ?>
            </center>
          </td>
          <td rowspan="2">
            <img src="data:image/jpeg;base64,<?= base64_encode($row['IMAGE']) ?>" onclick="openFullscreenImage(this)"
              style="width: 200px; height: 200px; cursor: pointer;">
          </td>
        </tr>
        <tr>
          <td>
            <center>
              <?= $row['SEASON'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['PARTS-AFFECTED'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['PORD'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['AREA'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['BACKGROUND'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['PORDNAME'] ?>
            </center>
          </td>
          <td>
            <center>
              <?= $row['IMGCONTAINS'] ?>
            </center>
          </td>
          <td>
            <center>
              <form action='transferdata.php' method='POST' style='text-align:center;'>
                <input type=hidden name='id' value="<?= $id ?>">
                <input class='butt1' type='submit' name='approve' onclick='transferdata.php'
                  value='Approve &#x2714;'></input>
              </form>

              <form action="reject.php" method="POST" onsubmit="return confirm('Are you sure you want to delete this?')">
                <input type=hidden name='id' value="<?= $id ?>">
                <input class='butt2' type='submit' value='Reject &#x2716;'></input>
              </form>

              <form action='edit.php' method='POST' style='text-align:center;'>
                <input type=hidden name='id' value="<?= $id ?>">
                <input class='butt3' type='submit' name='edit' onclick='edit.php' value='Edit &#x2712;'></input>
              </form>
            </center>
          </td>
        </tr>
        <tr>
          <td colspan="9">
            <center>
              <h2>Uploaded By:
                <?= $row['User']; ?>
              </h2>
            </center>
          </td>
        </tr>
      <?php endforeach; ?>
    </table>
  </div>
  <script>
    function openFullscreenImage(img) {
      var fullscreen = document.createElement('div');
      fullscreen.style.position = 'fixed';
      fullscreen.style.top = 0;
      fullscreen.style.left = 0;
      fullscreen.style.width = '100%';
      fullscreen.style.height = '100%';
      fullscreen.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
      fullscreen.style.display = 'flex';
      fullscreen.style.justifyContent = 'center';
      fullscreen.style.alignItems = 'center';
      fullscreen.style.zIndex = 9999;

      var imgElement = document.createElement('img');
      imgElement.src = img.src;
      imgElement.style.maxWidth = '90%';
      imgElement.style.maxHeight = '90%';

      fullscreen.appendChild(imgElement);
      fullscreen.onclick = function () {
        fullscreen.parentNode.removeChild(fullscreen);
      };

      document.body.appendChild(fullscreen);

      fullscreen.addEventListener('click', function () {
        document.body.removeChild(fullscreen);
      });
    }
    function applyFilters() {
      var userFilter = document.getElementById('user-filter').value;
      var cropFilter = document.getElementById('crop-filter').value;
      var monthFilter = document.getElementById('month-filter').value;
      var yearFilter = document.getElementById('year-filter').value;
      var stageFilter = document.getElementById('stage-filter').value;
      var partsFilter = document.getElementById('parts-filter').value;
      var seasonFilter = document.getElementById('season-filter').value;
      var stateFilter = document.getElementById('state-filter').value;
      var pordFilter = document.getElementById('pord-filter').value;
      var url = 'display.php';

      if (userFilter || cropFilter || monthFilter || yearFilter || stageFilter || partsFilter || seasonFilter || stateFilter || pordFilter) {
        url += '?';
        if (userFilter) {
          url += 'user=' + userFilter + '&';
        }
        if (cropFilter) {
          url += 'crop=' + cropFilter + '&';
        }
        if (monthFilter) {
          url += 'month=' + monthFilter + ' & ';
        }
        if (yearFilter) {
          url += 'year=' + yearFilter + '&';  // Include the year filter
        }
        if (stageFilter) {
          url += 'stage=' + stageFilter + '&';
        }
        if (partsFilter) {
          url += 'parts=' + partsFilter + '&';
        }
        if (seasonFilter) {
          url += 'season=' + seasonFilter + '&';
        }
        if (stateFilter) {
          url += 'state=' + stateFilter + ' & ';
        }
        if (pordFilter) {
          url += 'pord=' + pordFilter + '&';
        }
        // Remove the trailing '&' from the URL
        url = url.slice(0, -1);
      }
      // Redirect to the filtered URL
        window.location.href = url;
      }


    function resetFilters() {
      window.location.href = 'display.php';
    }

  </script>
<!-- </body>
<script>
    applyFilters();
</script> -->

</html>

download.php

<?php
require('DBinfo.php');

// // Create a new PDO instance
$conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);

// // Set the PDO error mode to exception
 $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// Query to retrieve all images from the table
$sql = "SELECT `IName`,`IMAGE` FROM permdb;";

// Prepare the SQL query
$stmt = $conn->prepare($sql);

// Execute the query
$stmt->execute();

// Create a new folder to store the downloaded images
$folder_name = "downloaded_images";
if (!file_exists($folder_name)) {
    mkdir($folder_name);
}

// Loop through the results and download each image
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    $image_data = $row['IMAGE'];
    $iname = $row['IName']; // Get the IName column value
    // Generate a unique filename for each image
    $filename = $iname . '.jpg'; // Rename the file using IName
    
    // Save the image to the folder
    file_put_contents($folder_name . '/' . $filename, $image_data);
}

header('Content-Type: folder');
header('Content-Disposition: attachment; filename='.$folder_name);
// Close the database connection
$conn = null;
  
?>
<html>
    <body>
        <h1>Download Sucessful</h1>
    </body>
</html>

downloadone.php

<?php
require('DBinfo.php');
session_start();

// Assign a specific value to $_SESSION['ID']
$_SESSION['ID'] = $_POST["id"];
$id = $_SESSION['ID'];

// Create a new PDO instance
$conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);

// Query to retrieve the image from the table where IName matches $id
$sql = "SELECT IName, IMAGE FROM permdb WHERE IName = '$id'";

// Execute the query
$stmt = $conn->query($sql);

// Fetch the row
$row = $stmt->fetch(PDO::FETCH_ASSOC);

if ($row) {
    $image_data = $row['IMAGE'];
    $filename = $id . '.jpg'; // Rename the file using the ID

    // Set the appropriate headers for image download
    header('Content-Type: image/jpeg');
    header('Content-Disposition: attachment; filename='.$filename);

    // Output the image data directly
    echo $image_data;
    exit;
}
?>
<html>
    <body>
        <?php if ($row) : ?>
            <h1>Download Successful for ID: <?php echo $id; ?></h1>
        <?php else : ?>
            <h1>No image found for ID: <?php echo $id; ?></h1>
        <?php endif; ?>
    </body>
</html>

edit.php

<html>
<head>
    <title>
        Edit Form
    </title>
    <link rel="stylesheet" href="User.css">
</head>

<body>
    <?php
    session_start();
    if (!isset($_SESSION['UN'])) {
        header("location:index.php");
        exit;
    }
    if(!isset($_SESSION['id'])){
        $_SESSION['id'] =  $_POST["id"];
    }
    $id=$_SESSION['id'];
    require('DBinfo.php');
    $C = "SELECT * FROM crop";
    ?>
    <div class='Edit'>
    <div class='heading'>
    <button onclick="window.location.href ='display.php';">&#8249; Go Back</button>
        <center>
            <h1>
                Edit Crop Details of Image:
                <?php
                echo $_SESSION['id'];
                ?>
            </h1>
            <h3>Note: Scroll down to view old Details</h3>
        </center>
        <button onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
    <div id="box">
        <form action="Upro.php" method="POST">
            <table align="center" cellpadding="3px">
                <tr>
                    <td colspan="2" align="center">
                        <h2>Select Crop<h2>
                    </td>
                    <td colspan="2" align="center">
                        <h2>Select Month</h2>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select id="Crop" name="Crop">'
                            <?php

                            if ($result = $conn->query($C)) {
                                while ($row = $result->fetch_assoc()) {
                                    $Crop = $row["CName"];
                                    echo '<H1><option value=' . $Crop . '>' . $Crop . '</option></h1>';
                                }
                                echo
                                    '</select>
                                </td>';
                                $result->free();
                            }
                            ?>
                    </td>
                    <td>
                        <select name="month" id="month">
                            <option value="January">January</option>
                            <option value="February">February</option>
                            <option value="March">March</option>
                            <option value="April">April</option>
                            <option value="May">May</option>
                            <option value="June">June</option>
                            <option value="July">July</option>
                            <option value="August">August</option>
                            <option value="Septmember">Septmember</option>
                            <option value="October">October</option>
                            <option value="November">November</option>
                            <option value="December">December</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h2>
                            Select Year
                        </h2>
                    </td>
                    <td colspan="2" align="center">
                        <h2>
                            Crop stage
                        </h2>
                    </td>
                </tr>
                <tr>
                    <td>
                        <select name="year" id="year">
                            <option value="2015">2015</option>
                            <option value="2016">2016</option>
                            <option value="2017">2017</option>
                            <option value="2018">2018</option>
                            <option value="2019">2019</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                            <option value="2022">2022</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                            <option value="2029">2029</option>
                            <option value="2030">2030</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <select class='l' id="cstage" name="cstage">
                            <option value="Germination">Germination stage</option>
                            <option value="Seedling">Seedling stage</option>
                            <option value="Rosette">Rosette stage</option>
                            <option value="Vegetative">Vegetative stage</option>
                            <option value="Flowering">Flowering stage</option>
                            <option value="Seed Setting">Seed Setting stage</option>
                            <option value="Seed Filling">Seed Filling stage</option>
                            <option value="Ripening">Ripening stage</option>
                            <option value="Harvesting">Harvesting stage</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h3>
                            Parts Affected
                        </h3>
                    </td>
                    <td colspan="2" align="center">
                        <h2>
                            Device/shot
                        </h2>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select id="part" name="part">
                            <option value="Leaves">Leaves</option>
                            <option value="Stem">Stem</option>
                            <option value="Flowers">Flowers</option>
                            <option value="Capsules">Capsules</option>
                            <option value="Spikes">Spikes</option>
                            <option value="Whole Plant">Whole Plant</option>
                            <option value="Flower Head">Flower Head</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <select id="device" name="device">
                            <option value="Camera-Long">Camera-Long</option>
                            <option value="Camera-CloseUp">Camera-CloseUp</option>
                            <option value="Mobile-Long">Mobile-Long</option>
                            <option value="Mobile-CloseUp">Mobile-CloseUp</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h2>
                            Season
                        </h2>
                    </td>
                    <td colspan="2" align="center">
                        <h3>
                            State
                        </h3>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="cetner">
                        <select id="season" name="season" class="pageElement">
                            <option value="Kharif">Kharif</option>
                            <option value="Rabi">Rabi</option>
                            <option value="Summer">Summer</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <select id="state" name="state">
                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                            <option value="Assam">Assam</option>
                            <option value="Bihar">Bihar</option>
                            <option value="Chattisgarh">Chattisgarh</option>
                            <option value="Goa">Goa</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Haryana">Haryana</option>
                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                            <option value="Jharkhand">Jharkhand</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Kerala">Kerala</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Manipur">Manipur</option>
                            <option value="Meghalaya">Meghalaya</option>
                            <option value="Mizoram">Mizoram</option>
                            <option value="Nagaland">Nagaland</option>
                            <option value="Odisha">Odisha</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Sikkim">Sikkim</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Tripura">Tripura</option>
                            <option value="Uttarakhand">Uttarakhand</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h3>
                            Pest Or Disease
                        </h3>
                    </td>
                    <td colspan="2" align="center">
                        <h3>
                            Place
                        </h3>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select name="pord" id="pord">
                            <option value="pest">Pest</option>
                            <option value="disease">Disease</option>
                            <option value="NaturalEnemy">Natural Enemy</option>
                            <option value="healthy">Healthy</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <input type="text" name="Area" id="Area"
                            oninput="this.value=this.value.replace(/[^a-zA-Z]/g,'');" required>
                    </td>
                </tr>
                <tr>
                    <td align="center" colspan="4">
                        <input type="submit" value="Next">
                    </td>
                </tr>
            </table>
        </form>
    </div>
</body>
<footer>
<div class='Table'>
    <?php
    // Create database connection
    try {
      $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
      // set the PDO error mode to exception
      $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
      echo " ";

      $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

      // select all data from the table
      $stmt = $conn->query("SELECT * FROM tempdb where IName=$id ");
      $data = $stmt->fetchAll();
      ?>
      <table border=1>
        <tr>
          <th>
            <h2 class="z">CROP</h2>
          </th>
          <th>
            <h2 class="z">MONTH</h2>
          </th>
          <th>
            <h2 class="z">YEAR</h2>
          </th>
          <th>
            <h2 class="z">CROP STAGE</h2>
          </th>
          <th>
            <h2 class="z">STATE</h2>
          </th>
          <th>
            <h2 class="z">DEVICE</h2>
          </th>
          <th>
            <h2 class="z">PEST STAGE</h2>
          </th>
        </tr>
        <!-- ************************************************** -->
        <tr>
          <th>
            <h2 class="z">SEASON</h2>
          </th>
          <th>
            <h2 class="z">PARTS AFFECTED</h2>
          </th>
          <th>
            <h2 class="z">PORD</h2>
          </th>
          <th>
            <h2 class="z">AREA</h2>
          </th>
          <th>
            <h2 class="z">BACKGROUND</h2>
          </th>
          <th>
            <h2 class="z">IMAGEDESC</h2>
          </th>
          <th>
            <h2 class="z">IMAGECONT</h2>
          </th>
        </tr>
        <?php
        foreach ($data as $row) {
          $_SESSION['ID'] = $row['IName'];
          $id = $_SESSION['ID'];
          echo "<tr style='margin-top: 1%;'>
                    <td><center>{$row['CROP']}</center></td>
                    <td><center>{$row['MONTH']}</center></td>
                    <td><center>{$row['YEAR']}</center></td>
                    <td><center>{$row['CROP STAGE']}</center></td>
                    <td><center>{$row['PARTS-AFFECTED']}</center></td>
                    <td><center>{$row['DEVICE/SHOT']}</center></td>
                    <td><center>{$row['STAGE']}</center></td>
              </tr>
              <style>
                  .butt1{
                    background-color:white;
                    padding:3%;
                    border-radius:10px;
                    margin-bottom:15px;
                  }
                  .butt1:hover{
                    background-color:green;
                    color:white;
                  }
                  .butt1:active{
                    opacity:0.7;
                  }
                  .butt2{
                    background-color:white;
                    padding:3%;
                    border-radius:10px;
                    margin-bottom:15px;
                  }
                  .butt2:hover{
                    background-color:red;
                    color:white;
                  }
                  .butt2:active{
                    opacity:0.7;
                  }
                  .butt3{
                    background-color:white;
                    padding:3%;
                    border-radius:10px;
                    margin-bottom:15px;
                  }
                  .butt3:hover{
                    background-color:#FFD700;
                    color:cornsilk;
                  }
                  .butt3:active{
                    opacity:0.7;
                  }
              </style>
              <tr>
                    <td><center>{$row['SEASON']}</center></td>
                    <td><center>{$row['STATE']}</center></td>
                    <td><center>{$row['PORD']}</center></td>
                    <td><center>{$row['AREA']}</center></td>
                    <td><center>{$row['BACKGROUND']}</center></td>
                    <td><center>{$row['PORDNAME']}</center></td>
                    <td><center>{$row['IMGCONTAINS']}</center></td>
              </tr>
              <tr>
                <td colspan=" . "9" . ">
                <br>
                </td>
              </tr>
                  ";
        }
        echo "</table>";

    } catch (PDOException $e) {
      echo "Connection failed: " . $e->getMessage();
    }
    ?>
    </div>
</footer>

</html>

editupload.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
  header("location:index.php");
  exit;
}
// Connect to the database
require('DBinfo.php');
//Fetching Data from imup.php
$_SESSION['bg'] = $_POST['bg'];
$_SESSION['Efr'] = (@$_POST['Efr']);
$_SESSION['Desc'] = @$_POST['Desc'];
$_SESSION['bg'] = $_POST['bg'];
$_SESSION['Stage'] = @$_POST['Stage'];
$crop = $_SESSION['CROP'];
$month = $_SESSION['month'];
$year = $_SESSION['year'];
$cs = $_SESSION['cs'];
$part = $_SESSION['part'];
$device = $_SESSION['device'];
$season = $_SESSION['season'];
$state = $_SESSION['state'];
$pord = $_SESSION['PORD'];
$area = $_SESSION['Area'];
$bg = $_SESSION['bg'];
$un=$_SESSION['UN'];
if ($_SESSION['PORD'] != 'pest' || $_SESSION['PORD'] != 'disease') {
  $pordname = urldecode($_SESSION['Efr']);
} else {
  $pordname = "N/A";
}
if ($_SESSION['PORD'] != 'pest') {
  $imagecont = "N/A";
  $stage = "N/A";
} else {
  $imagecont = $_SESSION['Desc'];
  $stage = $_SESSION['Stage'];
}
// Getting image from tempdb
$id = $_SESSION['id']; $query = "SELECT IMAGE FROM tempdb WHERE INAME = '$id'";
$result = mysqli_query($conn, $query);
$row = mysqli_fetch_assoc($result);
$data = $row['IMAGE'];

// Insert the image into the database               
$sql = "INSERT INTO permdb (`User`,`CROP`, `MONTH`, `YEAR`, `CROP STAGE`, `PARTS-AFFECTED`, `DEVICE/SHOT`, `SEASON`, `STATE`, `PORD`, `AREA`, `BACKGROUND`, `PORDNAME`, `IMGCONTAINS`, `STAGE`, `IMAGE`)
        VALUES ('$un','$crop', '$month', '$year', '$cs', '$part', '$device', '$season', '$state', '$pord', '$area', '$bg', '$pordname', '$imagecont', '$stage', ?)";

$stmt = mysqli_prepare($conn, $sql);
mysqli_stmt_bind_param($stmt, "s", $data);
mysqli_stmt_execute($stmt);

mysqli_stmt_close($stmt);
$sql = "DELETE FROM tempdb WHERE IName =" . $id;
$result = $conn->query($sql);
?>
<html>
<body>
  <style>
    html {
      background-color: cornsilk;
    }
    h1 
    {
      margin-top: 15%;
    }
    div{
      background-color: white;
      width:20%;
      height: 20%;
      border-radius: 5%;
    }

.button {
  display: inline-block;
  padding: 10px 20px;
  font-size: 16px;
  font-weight: bold;
  text-align: center;
  text-decoration: none;
  background-color: rgb(7, 138, 7);
  color: white;
  border: solid;
  border-radius: 5px;
  cursor: pointer;
  margin-right: 10px;
  margin-top: 6%
}
button:hover{
  opacity: 0.7;
}
button:active{
  opacity: 0.6;
}
  </style>
  <center>
    <h1>
      Upload Sucessful
    </h1>
    <div>
      <h2><a href="display.php" class="button">Go Back</a></h2>
      <h2 class="a"><a href="logout.php" class="button">Logout</a></h2>
    </div>
    </center>
</body>
</html>

Epro.php

<?php

session_start ();
if (!isset($_SESSION['UN']))
{
    header("location:index.php");
    exit;
    
}
    require('DBinfo.php');

$_SESSION['CROP'] =  $_POST["Crop"];
$_SESSION['PORD'] = $_POST["pord"];
$_SESSION['month'] = $_POST["month"];
$_SESSION['year'] = $_POST["year"];
$_SESSION['cs'] =  $_POST["cstage"];
$_SESSION['state'] = $_POST["part"];
$_SESSION['part'] = $_POST["state"];
$_SESSION['device'] = $_POST["device"];
$_SESSION['season'] = $_POST["season"];
$_SESSION['Area'] = $_POST["Area"];
?>

fetch_filtered_data.php

<?php
// Step 1: Connect to the database
require 'DBinfo.php';

$conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// Step 2: Retrieve filtered data
$cropFilter = $_GET['crop'];
$pordFilter = $_GET['pord'];

// Prepare the SQL query
$query = "SELECT CROP, PORD, PORDNAME, COUNT(*) as count FROM permdb WHERE (CROP = :crop OR :crop = '') AND (PORD = :pord OR :pord = '') GROUP BY CROP, PORD, PORDNAME";

$stmt = $conn->prepare($query);

// Bind the filter values to the query parameters
$stmt->bindParam(':crop', $cropFilter);
$stmt->bindParam(':pord', $pordFilter);

// Execute the query
$stmt->execute();

// Fetch the filtered data as an associative array
$data = $stmt->fetchAll(PDO::FETCH_ASSOC);

// Step 3: Return the filtered data as JSON
header('Content-Type: application/json');
echo json_encode($data);

// Step 4: Close the database connection
$conn = null;
?>


finishdeletion.php

<?php
session_start();

if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}

require('DBinfo.php');
$TBD = urldecode($_POST['TBD']);

if($_SESSION['hs'] != 'ND') {
    $c = $_SESSION['Crop'] . $_SESSION['hs'];
    $query = "DELETE FROM $c WHERE PName = ?";
    $stmt = $conn->prepare($query);
    $stmt->bind_param("s", $TBD);
} else {
    $query = "DELETE FROM nutrients WHERE name = ?";
    $stmt = $conn->prepare($query);
    $stmt->bind_param("s", $TBD);
}

$stmt->execute();?>
<html>
<body>
  <style>
    html {
      background-color: cornsilk;
    }
    h1 
    {
      margin-top: 15%;
    }
    div{
      background-color: white;
      width:20%;
      height: 20%;
      border-radius: 5%;
    }

.button {
  display: inline-block;
  padding: 10px 20px;
  font-size: 16px;
  font-weight: bold;
  text-align: center;
  text-decoration: none;
  background-color: rgb(7, 138, 7);
  color: white;
  border: solid;
  border-radius: 5px;
  cursor: pointer;
  margin-right: 10px;
  margin-top: 6%
}
button:hover{
  opacity: 0.7;
}
button:active{
  opacity: 0.6;
}
  </style>
  <center>
    <h1>
    <?php if ($stmt->affected_rows > 0) {
    echo "Record deleted successfully.";
} else {
    echo "Error deleting record. Query: " . $query . ". Error: " . $stmt->error;
}

$stmt->close();
$conn->close();
?>

    </h1>
    <div>
      <h2 class="a"><a href="manipulate.php" class="button">Home</a></h2>
      <h2 class="a"><a href="logout.php" class="button">Logout</a></h2>
    </div>
    </center>
</body>
</html>

gallery.css

body {
    background-color: cornsilk;
    margin: 0;
    padding: 20px;
}

.heading {
    border: 2px solid rgba(72, 172, 76, 251);
    background-color: rgba(74, 174, 78, 253);
    margin-bottom: 7%;
    padding: 5px 90px;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
    display: flex;
    justify-content: space-between;
}


.image-gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}

.image-card {
    margin: 10px;
    text-align: center;
}

.image-card img {
    max-width: 300px;
    max-height: 300px;
}

.logout-container {
    position: absolute;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    text-align: center;
    margin-top: 20px;
}

.logout-form input[type="submit"] {
    background-color: #4AAE4E;
    color: #4AAE4E;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
}

p {
    font-size: 18px;
    text-align: center;
}
button {
    background-color: rgb(54, 157, 63);
    padding: 0.23em 2%;
    color: white;
    font-size: 1em;
    border: none;
    transition: border 1ms;
    cursor: pointer;
}

gallery.php

<?php
session_start();
require 'DBinfo.php';

if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}

// Logout functionality
if (isset($_POST['logout'])) {
    session_destroy();
    header("location:manipulate.php");
    exit;
}

// Query to fetch the images
$sql = "SELECT IName, IMAGE FROM permdb";
$result = $conn->query($sql);
?>

<!DOCTYPE html>
<html>

<head>
    <title>Image Display</title>
    <link rel="stylesheet" type="text/css" href="gallery.css">
</head>

<body>
    <div class='heading'>
        <button onclick="window.location.href = 'manipulate.php';">&larr; Go Back</button>
        <center>
            <h1>Image Upload</h1>
        </center>
        <button onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
    </div>

    <div class="image-gallery">
        <?php if ($result->num_rows > 0): ?>
            <?php while ($row = $result->fetch_assoc()): ?>
                <div class="image-card">
                    <img src="data:image/jpeg;base64,<?= base64_encode($row['IMAGE']) ?>">
                    <p>
                        <?= $row['IName'] ?>
                    </p>
                </div>
            <?php endwhile; ?>
        <?php else: ?>
            <p>No images found.</p>
        <?php endif; ?>
    </div>

</body>

</html>

<?php
// Close the database connection
$conn->close();
?>

getusers.php

<?php
session_start();
require('DBinfo.php');
$tn = $_POST["usertype"];
$sql = "SELECT * FROM $tn";
// Redirect to index.php if user is not logged in
if (!isset($_SESSION['UN'])) {
    header("location: index.php");
    exit;
}
?>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIEW USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        table {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        td
        {
            font-size: large;
            text-align: center;
        }
        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
            align-content: center;
        }

        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,
        input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,
        input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }

        .logout {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'viewuser.php';">&larr; Go Back</button>
        <h1 class="ol">View Users</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>

<body>
    <div class="container">
        <h1>Select Privilage</h1>
        <table border="1">
            <tr>
                <th>User</th>
                <th>Password</th>
                <?php
                if ($tn=='moderator')
                {   
                    echo"<th>Specialization</th>";
                }
                ?>
            </tr>
            <?php
            if ($result = $conn->query($sql)) {
                foreach ($result as $row) {
                    $Uname = $row['Uid'];
                    $Pass = $row['pd'];
                    echo "<tr><td>".$Uname."</td><td>".$Pass."</td>";
                    if ($tn=='moderator')
                    {   
                        echo"<td>".$row['spz']."</td>";
                    }
                    echo"</tr>";
                }
                $result->free();
            }
            ?>
        </table>
    </div>
</body>

</html>

imed.php

<html>

<head>
    <?php
    session_start();
    require('DBinfo.php');
    if (!isset($_SESSION['UN'])) {
        header("location:index.php");
        exit;
    }
    ?>
    <title>
        Image Upload
    </title>
    <link rel="stylesheet" href="imup.css">
</head>

<body>
    <div class='heading'>
        <button onclick="window.location.href = 'edit.php';">
            &larr; Go Back
        </button>
        <center>
            <h1>
                Image Upload
            </h1>
        </center>
        <button onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
    <div id="box">
        <form action="editupload.php" method="post" enctype="multipart/form-data">
            <table>
                <tr>
                    <th align="center">
                        Background
                    </th>
                </tr>
                <tr>
                    <td>
                        <select name="bg" id="bg">
                            <option value="Lab">Lab</option>
                            <option value="Field">Field</option>
                            <option value="Background">With Background</option>
                        </select>
                    </td>
                </tr>
                <!--******************************************************************************************************* -->
                <?php
                if ($_SESSION['PORD'] == 'pest' || $_SESSION['PORD'] == 'disease') {
                    echo '<tr>
                    <th colspan="2">';
                    $c = "Select " . $_SESSION['CROP'] . " " . $_SESSION['PORD'];
                    echo $c . '-Scientific Name';
                    echo '</th>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select id="Efr" name="Efr">';
                    $c = $_SESSION['CROP'] . $_SESSION['PORD'];
                    $C = "Select * FROM $c";
                    if ($result = $conn->query($C)) {
                        while ($row = $result->fetch_assoc()) {
                            $PName = $row["PName"];
                            $SName = $row["SCName"];
                            $val = $PName . '-' . $SName;
                            echo '<h1>
                                <option value=' . urlencode($val) . '>' . $val . '</option>
                            </h1>';
                        }
                        echo '</select>
                    </td>';
                    $result->free();
                }
                }
                ; ?>
                <!-- ******************************************************************************************************* -->
                <?php
                if ($_SESSION['PORD'] == 'pest') {
                    // Do something if PORD equals 'pest', case-insensitive

                    echo
                        "<tr>
                        <th>
                            What is in the picture?
                        </th>
                        <th>
                            Stage
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <select name=" . "Desc" . " id=" . "Desc" . ">
                                <option value=" . "part" . ">Effected Part</option>
                                <option value=" . "pest" . ">Pest</option>
                            </select>
                        </td>
                        <td align=" . "center" . ">
                            <select id=" . "Stage." . " name=" . "Stage" . ">";

                    $c = 's' . $_SESSION['CROP'] . $_SESSION['PORD'];
                    $C = "Select * FROM $c";
                    if ($result = $conn->query($C)) {
                        while ($row = $result->fetch_assoc()) {
                            $stage = $row["stages"];
                            echo '<h1><option value=' . urlencode($stage) . '>' . $stage . '</option></h1>';
                        }
                        echo
                            '</select>
                        </td>';
                    $result->free();
                }
                echo "
                        </td>
                    </tr>";
                } ?>
            </table>
            <input type="submit" value="Upload Images">
        </form>
    </div>
</body>

</html>


imup.css

html {
    background: cornsilk;
    height: 100%;
  }
  
  button {
    background-color: rgb(54, 157, 63);
    padding: 0.23em 2%;
    color: white;
    font-size: 1em;
    border: none;
    transition: border 1ms;
  }
  
  .heading {
    display: flex;
    justify-content: space-between;
    border: 2px solid rgba(72, 172, 76, 251);
    background-color: rgba(74, 174, 78, 253);
    margin-top: 0;
    padding: 0.33em 9%;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
  }
  
  button:hover {
    opacity: 0.7;
    cursor: pointer;
  }
  
  button:active {
    opacity: 0.5;
  }
  
  h1 {
    margin: 5%;
    color: aqua;
  }
  
  table {
    border-spacing: 15px;
  }
  
  th {
    font-size: large;
  }
  
  .file-upload {
    display: block;
    text-align: center;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 12px;
  }
  
  .file-upload .file-select {
    display: block;
    border: 1px solid rgb(104, 103, 103);
    border-radius: 5px;
    color: black;
    cursor: pointer;
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    height: 40px;
    line-height: 40px;
    text-align: left;
    background: #FFFFFF;
    overflow: hidden;
    position: relative;
  }
  
  .file-upload .file-select .file-select-button {
    background: rgb(7, 138, 7);
    padding: 0 10px;
    display: inline-block;
    height: 40px;
    line-height: 40px;
  }
  
  .file-upload .file-select {
    line-height: 40px;
    display: inline-block;
    padding: 0 10px;
  }
  
  .file-upload .file-select:hover {
    transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -webkit-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
  }
  
  .file-upload .file-select:hover .file-select-button {
    opacity: 0.7;
    color: #FFFFFF;
    transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -webkit-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
  }
  
  .file-upload.active .file-select {
    border-color: #3fa46a;
    transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -webkit-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
  }
  
  .file-select {
    width: 100%;
  }
  
  .file-upload.active .file-select .file-select-button {
    background: #3fa46a;
    color: #FFFFFF;
    transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -webkit-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
  }
  
  .file-upload .file-select input[type=file] {
    z-index: 100;
    cursor: pointer;
    position: absolute;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    opacity: 0;
    filter: alpha(opacity=0);
  }
  
  .file-upload .file-select.file-select-disabled {
    opacity: 0.65;
  }
  
  .file-upload .file-select.file-select-disabled:hover {
    cursor: default;
    display: block;
    border: 2px solid #dce4ec;
    color: #34495e;
    cursor: pointer;
    height: 40px;
    line-height: 40px;
    margin-top: 5px;
    text-align: left;
    background: #FFFFFF;
    overflow: hidden;
    position: relative;
  }
  
  .file-upload .file-select.file-select-disabled:hover .file-select-button {
    background: #dce4ec;
    color: #666666;
    padding: 0 10px;
    display: inline-block;
    height: 40px;
    line-height: 40px;
  }
  
  .file-upload .file-select.file-select-disabled:hover .file-select-name {
    line-height: 40px;
    display: inline-block;
    padding: 0 10px;
  }
  
  select {
    width: 100%;
    padding-left: 15px;
    padding-top: 10px;
    padding-bottom: 10px;
    padding-right: 15px;
    border-radius: 5px;
    background-color: white;
  }
  
  h2,
  h3 {
    margin: 1%;
  }
  
  input[type=submit] {
    background-color: rgb(7, 138, 7);
    border-radius: 15px;
    border: none;
    color: rgb(255, 255, 255);
    padding-left: 40px;
    padding-top: 13px;
    padding-bottom: 13px;
    padding-right: 40px;
    border-radius: 5px;
    margin-top: 40px;
    text-decoration: none;
    cursor: pointer;
  }
  
  body {
    margin: 0%;
  }
  
  input[type=submit]:hover {
    opacity: 0.7;
  }
  
  input[type=submit]:active {
    opacity: 0.6x;
  }
  
  h1 {
    font-size: x-large;
    color: black;
    -webkit-text-stroke: 1px black;
    -webkit-text-fill-color: white;
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    margin-top: 4.5px;
    margin-bottom: 6px;
  }
  
  .heading {
    border: 2px solid rgba(72, 172, 76, 251);
    background-color: rgba(74, 174, 78, 253);
    margin-top: 0%;
    padding-top: 5px;
    padding-right: 90px;
    padding-bottom: 5px;
    padding-left: 90px;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
  }
  
  #box {
    overflow: auto;
    position: relative;
    text-align: center;
    padding: 2%;
    padding-bottom: 5%;
    width: 30vw;
    height: min-content;
    margin: 20px auto;
    background-color: white;
    border-radius: 10px;
    border: 1px solid black;
    margin-top: 9.5%;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
    
  }
  
  /* Media Queries */
  @media (max-width: 768px) {
    /* Adjust styles for mobile devices */
    h1 {
      font-size: large;
    }
  
    #box {
      width: 80%;
    }
  }
  

imup.php

<?php
session_start();
require('DBinfo.php');

// Redirect to index.php if user is not logged in
if (!isset($_SESSION['UN'])) {
    header("location: index.php");
    exit;
}

/*// Database connection
try {
    $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    echo "Connection failed: " . $e->getMessage();
    exit;
}*/

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $uploads_dir = 'images/';

    if (empty($_FILES['images']['name'][0])) {
        echo "<script>alert('Please select at least one image to upload.');</script>";
    } else {
        // Perform image upload process here
    }
}
?>

<html>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Upload</title>
    <link rel="stylesheet" href="imup.css">
</head>

<body>
    <div class='heading'>
        <button onclick="window.location.href = 'User.php';">&larr; Go Back</button>
        <center>
            <h1>Image Upload</h1>
        </center>
        <button onclick="window.location.href = 'logout.php';">Logout</button>
    </div>

    <div id="box">
        <form action="upload.php" method="post" enctype="multipart/form-data">
            <table>
                <tr>
                    <th>Image Upload</th>
                </tr>
                <tr>
                    <td>
                        <div class="file-upload">
                            <input type="file" accept="image/png, image/jpeg, image/jpg" name="images[]" multiple required onchange="updateFileName()" id="fileInput">
                            <label for="fileInput" class="file-select-button" id="fileName"></label>
                        </div>
                        <div id="file-selected"></div>
                    </td>
                </tr>
                <tr>
                <th align="center">Background</th>
                </tr>
                <tr>
                <td>
                        <select name="bg" id="bg">
                            <option value="Lab">Lab</option>
                            <option value="Field">Field</option>
                            <option value="Background">With Background</option>
                        </select>
                    </td>
                </tr>

                <?php
                if ($_SESSION['PORD'] == 'pest' || $_SESSION['PORD'] == 'disease') {
                    echo '<tr>
                            <th colspan="2">';
                    $c = "Select " . $_SESSION['CROP'] . " " . $_SESSION['PORD'];
                    echo $c . '-Scientific Name';
                    echo '</th>
                        </tr>
                        <tr>
                            <td colspan="2" align="center">
                                <select id="Efr" name="Efr">';
                    $c = $_SESSION['CROP'] . $_SESSION['PORD'];
                    $C = "SELECT * FROM $c";
                    $result = $conn->query($C);
                    foreach ($result as $row) {
                        $PName = $row["PName"];
                        $SName = $row["SCName"];
                        $val = $PName . '-' . $SName;
                        echo '<option value=' . urlencode($val) . '>' . $val . '</option>';
                    }
                    echo '</select>
                            </td>';
                    $result = null;
                }
                ?>

                <?php
                if ($_SESSION['PORD'] == 'pest') {
                    echo '<tr>
                            <th>What is in the picture?</th>
                        </tr>
                        <tr>
                            <td>
                                <select name="Desc" id="Desc">
                                    <option value="part">Effected Part</option>
                                    <option value="pest">Pest</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                        <th>Stage</th>
                        </tr>
                        <tr>
                        <td align="center">
                                <select id="Stage" name="Stage">
                                <option value="N/A">N/A</option>';
                    $c = 's' . $_SESSION['CROP'] . $_SESSION['PORD'];
                    $C = "SELECT * FROM $c";
                    $result = $conn->query($C);
                    foreach ($result as $row) {
                        $stage = $row["stages"];
                        echo '<option value=' . urlencode($stage) . '>' . $stage . '</option>';
                    }
                    echo '</select>
                            </td>
                            </tr>';
                    $result = null;
                } elseif ($_SESSION['PORD'] == 'Nutrient Defficiency') {
                    $stmt = $conn->query("SELECT * FROM nutrients");
                    $data = $stmt->fetchAll();
                    echo '<tr>
                            <th colspan="2">Nutrient Deficiency</th>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <select>';
                    foreach ($data as $row) {
                        $o = $row['name'];
                        echo '<option value=' . $o . '>' . $o . '</option> ';
                    }
                    echo '</select>
                            </td>
                        </tr>';
                }
                ?>
            </table>
            <input type="submit" value="Upload Images">
        </form>
    </div>

    <script>
        function triggerFileInput() {
            document.getElementById('fileInput').click();
        }

        function updateFileName() {
            var fileInput = document.getElementById('fileInput');
            var fileNameContainer = document.getElementById('fileName');
            var fileSelectedContainer = document.getElementById('file-selected');
            fileNameContainer.textContent = '';

            // Display selected file names
            var fileNames = '';
            for (var i = 0; i < fileInput.files.length; i++) {
                fileNames += fileInput.files[i].name + '<br>';
            }
            fileSelectedContainer.innerHTML = fileNames;
        }
    </script>
</body>

</html>


index.css

    /* Common styles for desktop and mobile */
    html
    {
      height:100%;
    }
    body {
        font-family: 'Ubuntu', sans-serif;
        background-color: #f9f4ca;
        margin: 0;
        padding: 0;
        height: 100vh;
      }
  
      .heading {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .morehead
      {
        border: 2px solid rgb(0, 0, 0);
        background-color: white;
        padding: 5px;
        margin: 5px;
        box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.4);
      }
      .morehead h5
      {
        font-weight: bold;
        font-size: large;
        color: rgb(5, 151, 22);
        
      }
      .morehead img {
        height: 15vh;
        width: 15vh;
        margin: 0 10px;
      }
  
      .heading h1 {
        font-size: 2vw;
        margin: 0;
      }
  
      .log {
        display: flex;
        align-items: flex-start;
        justify-content: center;
        width: 100%;
        max-height: min-content;
        margin-top: 5vh;
      }
  
      .login {
        -webkit-border-radius: 10px;
        border-radius: 10px;
        background: #fff;
        padding: 30px;
        max-width: 300px;
        width: 90%;
        -webkit-box-shadow: 0 30px 60px 0 rgba(0, 0, 0, 0.3);
        box-shadow: 0 30px 60px 0 rgba(0, 0, 0, 0.3);
      }
  
      h2 {
        font-size: 24px;
        font-family: "Times New Roman";
        font-weight: bold;
        color: rgb(5, 151, 22);
        margin: 0 0 8% 0;
      }
  
      label,
      input,
      button,
      select {
        display: block;
        width: 100%;
      }
  
      input[type="text"],
      input[type="password"],
      select {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 16px;
        background-color: #fff;
        background-image: linear-gradient(to bottom, #f9f9f9, #e8e8e8);
      }
  
      .select-container {
        position: relative;
      }
  
      select {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        width: 100%;
        padding-right: 30px;
      }
  
      .select-arrow {
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
        color: #888;
        pointer-events: none;
        font-size: 20px;
      }
      button {
        background-color: rgb(7, 138, 7);
        padding: 0.23em 2%;
        color: white;
        border-radius: 15px;
        font-size: 1em;
        padding: 16px 20px;
        border: none;
        transition: border 1ms;
        margin: 10px 0 0;
        width: min-content;
        min-width: 130px;
        cursor: pointer;
        display: inline;
        margin-right: 2.2vh;
    }
  
      input[type="submit"] {
        background-color: rgb(7, 138, 7);
        border-radius: 15px;
        border: none;
        color: white;
        padding: 16px 32px;
        text-decoration: none;
        margin: 10px 0;
        cursor: pointer;
      }
      footer{
        position: relative;
         right: 0;bottom:0;left:0;
        margin-top: 6vh;
        margin-bottom: 0;
        padding: 0.5vh;
        background-color: #4aae4e;
        text-align: center;
      }
      .buttons{
        display: flex;    
      }
  
      /* Media query for mobile devices */
      @media only screen and (max-width: 600px) {
        .heading img,
        .heading h1 {
          margin: 0;
        }
  
        .heading img {
          height: 15vh;
          width: 15vh;
        }
  
        .heading h1 {
          font-size: 2vh;
        }
        .heading{
          display: flex;
        }
      }
      footer{
        margin-top: 6vh;
        margin-bottom: 0;
        padding: 0.5vh;
        background-color: #4aae4e;
        text-align: center;
      }

index.php

<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Repository</title>
  <link rel="stylesheet" href="index.css">
</head>
<!-- 
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Author: P Satya Sreekar
Date:8-11-2023
Description: The first page of the web application 
Last Update:Fixec Heading

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
-->
<body>
  <div class="morehead">
    <div class="heading">
      <img src="icar.png" alt="">
      <h1><i>TilhanTec</i> - Oilseeds Pests and Diseases Image Repository System V2.0</h1>
      <img src="iior-logo.jpg" alt="">
    </div>
    <center>
      <h5>(<i>TilhanTec</i> - OPDIRSV2.0)</h5>
    </center>
  </div>

  <div class="log">
    <div class="login">
      <center>
        <h2>LOGIN</h2>
      </center>
      <form action="./validation.php" method="POST">
        <label for="UserName">User Name:</label>
        <input type="text" id="UserName" name="UserName" placeholder="Enter your User Name" required>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" placeholder="Enter your Password" required>
        <div class="select-container">
          <label for="role">Role:</label>
          <select id="role" name="role">
            <option value="User">User</option>
            <option value="Moderator">Approver</option>
            <option value="Admin">Admin</option>
          </select>
          <span class="select-arrow">&#9662;</span>
        </div>
        <input type="submit" value="Submit">
      </form>
      <div class='buttons'>
        <button onclick="window.location.href = 'Dash.php';">Dashboard</button>
        <button onclick="window.location.href = 'team.html';">Team</button>
      </div>


    </div>
  </div>
</body>
<footer>
  <h3>&copy;Developed by <a href="https://icar-iior.org.in/">ICAR-IIOR</a> in collaboration with <a
      href="https://klh.edu.in">KLEF</a>, Hyderabad</h3>
</footer>

</html>


initialise.php

<html>
    <head>
        <title> DATABASE INITIALISATION </title>
    </head>
    <body>
    <?php
                                                                                    // Create connection
    $servername = "localhost";
    $username = "root";
    $password = "";
    $conn = new mysqli($servername, $username, $password); 
    $db = "myDB";
    $CDB = "CREATE DATABASE myDB";
    $UDB = "USE myDB";          // Check connection
    if ($conn->query($UDB) === TRUE) {                                                          //USE DATABASE
        echo "Database in use";
        } else {
        echo "Error connecting to database: " . $conn->error;
        }
    
    //DROP
    $Dadmin = "DROP TABLE Admin";
    $Dmoderator = "DROP TABLE Moderator";
    $Duser = "DROP TABLE User";
    //$conn->query($Dadmin .';'. $Dmoderator .';'. $Duser.';' );
            //CREATE
    $createA= "CREATE TABLE Admin(Uid VARCHAR(25) NOT NULL primary key, pd VARCHAR(20) NOT NULL)";
    $createU = "CREATE TABLE User(Uid VARCHAR(25) NOT NULL primary key, pd VARCHAR(20) NOT NULL)";
    $createM = "CREATE TABLE Moderator(Uid VARCHAR(25) NOT NULL primary key, pd VARCHAR(20) NOT NULL)";
    //$conn->query($createA . $createA . $createA);
    //INSERT
    $sqlinsertA = "INSERT INTO Admin VALUES ('Sreekar','ASreekar@2003'),('Laasya','ALaasya@2004'),('superA','superA')";
    $sqlinsertU = "INSERT INTO User VALUES ('Sreekar','USreekar@2003'),('Laasya','ULaasya@2004'),('superU','superU')";
    $sqlinsertM = "INSERT INTO Moderator VALUES ('Sreekar','MSreekar@2003'),('Laasya','MLaasya@2004'),('superM','superM')";
    //DISPLAY
    $displayA = "SELECT * FROM Admin";
    $displayU = "SELECT * FROM User";
    $displayM = "SELECT * FROM Moderator";


    $conn->query($Dadmin);
    $conn->query($Duser);
    $conn->query($Dmoderator);

    
    if ($conn->connect_error) {
    die("Connection failed: <br>" . $conn->connect_error);
    }
                                                                                                /*   
                                                                                                // Create database
                                                                                                if ($conn->query($CDB) === TRUE) {
                                                                                                echo "Database Created";
                                                                                                } else {
                                                                                                echo "Error connecting to database: " . $conn->error;
                                                                                                }   
                                                                                                */
 
    
                                                                                                //create tables
    if ($conn->query($createA) === TRUE)
        {
            echo "Admin Tables created successfully<br>";
        } 
    else 
        {
            echo "Error creating tables:<br> " . $conn->error;
        }

    if ($conn->query($sqlinsertA) === TRUE) 
        {
            echo "Inserted into Admin Database successfully<br>";
        } 
    else 
        {
        echo "Error inserting into database<br>" . $conn->error;
        }
        if ($conn->query($createU) === TRUE)
        {
            echo "Tables created successfully<br>";
        } 
    else 
        {
            echo "Error creating tables: <br>" . $conn->error;
        }

    if ($conn->query($sqlinsertU) === TRUE) 
        {
            echo "Inserted into Database successfully<br>";
        } 
    else 
        {
        echo "Error inserting into database<br>" . $conn->error;
        }
        if ($conn->query($createM) === TRUE)
        {
            echo "Tables created successfully<br>";
        } 
    else 
        {
            echo "Error creating tables:<br> " . $conn->error;
        }

    if ($conn->query($sqlinsertM) === TRUE) 
        {
            echo "Inserted into Database successfully<br>";
        } 
    else 
        {
        echo "Error inserting into database<br>" . $conn->error;
        }
    
    $result = $conn->query($displayA);  

            while($row = $result->fetch_assoc()) 
                echo "id: " . $row["Uid"]. " <br> password: " . $row["pd"]. "<br><br>";    
    $result = $conn->query($displayU);  

                while($row = $result->fetch_assoc()) 
                    echo "id: " . $row["Uid"]. " <br> password: " . $row["pd"]. "<br><br>";
    $result = $conn->query($displayM);  

                    while($row = $result->fetch_assoc()) 
                        echo "id: " . $row["Uid"]. " <br> password: " . $row["pd"]. "<br><br>";
        
    ?>

    </body>
</html>

insertintostages.php

<?php
require('DBinfo.php');
$query="INSERT INTO `ssafflowerpest` (`stages`) VALUES ('N/A')";
if ($conn->query($sql) === TRUE) {
    $message = 'Record created successfully';
} else {
    $message = "'Error:' . $sql . '<br>'";
}
echo $message;
?>

logout.php

<?php
session_start();
session_unset();
session_destroy();
header("refresh:0.1;url=index.php");
?>
<html>

<body>
  <style>
    html {
      background-color: cornsilk;
    }

    h1 {
      margin-top: 25%;
    }
  </style>
  <center>
    <h1>
      Logging Out...
    </h1>
  </center>
</body>

</html>

manipulate.css

body {
    margin: 0;
    background: cornsilk;
}

.heading {
    border: 2px solid rgba(72, 172, 76, 251);
    background-color: rgba(74, 174, 78, 253);
    margin-bottom: 7%;
    padding: 5px 90px;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
    display: flex;
    justify-content: space-between;
}

.login {
    border: 2px solid rgb(0, 0, 0);
    text-align: center;
    padding: 3% 10%;
    width: 80%;
    max-width: 400px;
    margin: 20px auto;
    background: white;
    border-radius: 10px;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
}

.login button {
    position: relative;
    background: #444;
    color: black;
    margin-bottom: 50px;
    text-decoration: none;
    text-transform: uppercase;
    border: none;
    letter-spacing: 0.1rem;
    font-size: 1rem;
    padding: 1rem 3rem;
    transition: 0.2s;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
}

.login button:hover {
    letter-spacing: 0.1rem;
    padding: 1.1rem 3.1rem;
    background: var(--clr);
    color: var(--clr);
    animation: box 3s infinite;
}

.login button::before {
    content: "";
    position: absolute;
    inset: 2px;
    background: white;
}

.login button span {
    position: relative;
    z-index: 1;
}

.login button i {
    position: absolute;
    inset: 0;
    display: block;
}

.login button i::before {
    content: "";
    position: absolute;
    width: 10px;
    height: 2px;
    left: 80%;
    top: -2px;
    border: 2px solid var(--clr);
    background: #272822;
    transition: 0.2s;
}

.login button:hover i::before {
    width: 15px;
    left: 20%;
    animation: move 3s infinite;
}

.login button i::after {
    content: "";
    position: absolute;
    width: 10px;
    height: 2px;
    left: 20%;
    bottom: -2px;
    border: 2px solid var(--clr);
    background: #272822;
    transition: 0.2s;
}

.login button:hover i::after {
    width: 15px;
    left: 80%;
    animation: move 3s infinite;
}
button {
    background-color: rgb(54, 157, 63);
    padding: 0.23em 2%;
    color: white;
    font-size: 1em;
    border: none;
    transition: border 1ms;
    cursor: pointer;
}

button:hover {
    opacity: 0.7;
    cursor: pointer;
}

button:active {
    opacity: 0.5;
}

.login {
  display: flex;
  align-items: center;
  justify-content: center;
}

.left-form,
.right-form {
  flex: 1;
}

.white-box {
  width: 200px;
  height: 200px;
  background-color: #fff;
  margin: 0 10px;
}


@keyframes move {
    0% {
        transform: translateX(0);
    }

    50% {
        transform: translateX(5px);
    }

    100% {
        transform: translateX(0);
    }
}

@keyframes box {
    0% {
        box-shadow: #27272c;
    }

    50% {
        box-shadow: 0 0 25px var(--clr);
    }

    100% {
        box-shadow: #27272c;
    }
}

@media (max-width: 600px) {
    .login {
        padding: 3% 5%;
    }

    button {
        padding: 0.8rem 2rem;
        margin-bottom: 30px;
    }
}

manipulate.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
} ?>
<html>

<head>
    <title>Administrator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="manipulate.css">
</head>

<body>
    <div class='heading'>
        <i></i>
        <h1 class="ol">ADMIN</h1>
        <button class='Logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
    <div class="login">
        <form>
            <table>
                <tr>
                    <td><button type="submit" formaction="addusers.php" style="--clr:#39FF14"><span>CREATE USERS</span><i></i></button></td>
                    <td><button type="submit" formaction="removeuser.php" style="--clr:#39FF14"><span>DELETE USERS</span><i></i></button></td>
                    <td><button type="submit" formaction="viewuser.php" style="--clr:#39FF14"><span>View USERS</span><i></i></button></td>
                </tr>
                <tr>
                    <td><button type="submit" formaction="manipulatedata.php" style="--clr:#39FF14"><span>MODIFY CROPS</span><i></i></button></td>
                    <td><button type="submit" formaction="addcrop.php" style="--clr:#39FF14"><span>A D D  CROPS</span><i></i></button></td>
                    <td><button type="submit" formaction="viewcrop.php" style="--clr:#39FF14"><span>VIEW CROPS</span><i></i></button></td>
                </tr>
                <tr>
                    <td colspan="3" align="center"><button type="submit" formaction="AdminDisplay.php" style="--clr:#39FF14"><span>VIEW APPROVED ENTRIES</span><i></i></button></td>
                </tr>
                <tr>
                    <td><button type="submit" formaction="download.php" style="--clr:#39FF14"><span>Download All</span><i></i></button></td>
                    <td><button type="submit" formaction="download.php" style="--clr:#39FF14"><span>Select Download</span><i></i></button></td>
                    <td><button type="submit" formaction="gallery.php" style="--clr:#39FF14"><span>Image Gallery</span><i></i></button></td>
                </tr>
            </table>

        </form>
    </div>
</body>

</html>

manipulatedata.php

<?php
session_start();
require('DBinfo.php');
$cropQuery = "SELECT * FROM crop";
if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}
?>

<!DOCTYPE html>
<html>

<head>
    <title>Delete Crop</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
            text-align: center;
            /* Align buttons to center horizontally */
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        .form-button {
            display: block;
            margin: 10px auto;
            /* Center buttons vertically */
            padding: 10px 20px;
            font-size: 16px;
            background-color: rgba(74, 174, 78, 253);
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .form-button:hover {
            background-color: rgba(74, 174, 78, 0.8);
        }

        label,
        input,
        select {
            display: block;
            width: 100%;
        }

        select {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
            background-color: #fff;
            background-image: linear-gradient(to bottom, #f9f9f9, #e8e8e8);
        }

        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 100%;
            padding-right: 30px;
        }

        .select-arrow {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            color: #888;
            pointer-events: none;
            font-size: 20px;
        }

        input[type="submit"] {
            background-color: rgb(7, 138, 7);
            border-radius: 15px;
            border: none;
            color: white;
            padding: 16px 32px;
            text-decoration: none;
            margin: 10px 0;
            cursor: pointer;
        
        }
        .logout {
            padding: 10px 20px;
            background-color: rgb(7, 138, 7);
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout:hover {
            background-color: #429843;
        }

        .heading {
            position:fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }
        .logout
        {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'manipulate.php';">&larr; Go Back</button>
        <h1 class="ol">Create New User</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>

<body>
    <div class="container">
        <h1>Modify Crop</h1>
        <form name=form action="DelSel.php" method="post">
            <table>
                <tr>
                    <th>Select Crop</th>
                    <th>Select Health State</th>
                </tr>
                <tr>
                    <td>
                        <select id="Crop" name="Crop">
                            <?php
                            if ($result = $conn->query($cropQuery)) {
                                foreach ($result as $row) {
                                    $crop = $row["CName"];
                                    echo '<option value="' . $crop . '">' . $crop . '</option>';
                                }
                                echo '</select></td>';
                                $result->free();
                            }
                            ?>
                    </td>
                    <td>
                        <select name="hs" id="hs">
                            <option value="pest">Pest</option>
                            <option value="disease">Disease</option>
                            <option value="ND">Nutrient Deficiency</option>
                        </select>
                    </td>
                </tr>
            </table>
            <Input type='submit' value='Delete'></Input>
            <Input type='submit' value='ADD' onclick="form.action='add.php';return true;"></Input>
        </form>
    </div>
</body>

</html>


redo.php

<html>
    <head>
        <title> DATABASE INITIALISATION ONE TIME USE ONLY </title>
    </head>
    <body>
    <?php
    //establish connection
    $servername = "localhost";
    $username = "root";
    $password = "";
    $conn = new mysqli($servername, $username, $password);
    // Check connection
    if ($conn->connect_error) {
        die("Connection failed: " . $conn->connect_error);
    }
    $sql = "USE myDB";
    if ($conn->query($sql) === TRUE) {
    echo "Database in use";
    } else {
    echo "Error connecting to database: " . $conn->error;
    }
    $TAdmin = "TRUNCATE TABLE Admin";
    $TModerator = "TRUNCATE TABLE MODERATOR";
    $TUser = "TRUNCATE TABLE USER";
    if ($conn->query($TAdmin) == TRUE)
    {
        echo "Table truncated successfully<br>";
    } 
    else 
    {
        echo "Error truncating the table" . $conn->error;
        
    }
    if ($conn->query($TModerator) == TRUE)
    {
        echo "Table truncated successfully<br>";
    } 
    else 
    {
        echo "Error truncating the table" . $conn->error;
        
    }
    if ($conn->query($TUser) == TRUE)
    {
        echo "Table truncated successfully<br>";
    } 
    else 
    {
        echo "Error truncating the table" . $conn->error;
        
    }
    
    ?>

    </body>
</html>

reject.php

<?php
session_start();

if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}
// Connect to the database
require('DBinfo.php');

$id = $_POST['id'];
$sql = "DELETE FROM tempdb WHERE IName =" . $id;
$result = $conn->query($sql);

echo
    "
<html>
    <style>
    html
    {
        background-color:cornsilk;
    }
    h1
    {
        margin-top:25%;
    }
    </style>
    <body>
        <center>
            <h1>
                Success
            </h1>
        </center>
    </body>
</html>
";
header('Refresh:1;URL=display.php');
?>

removeuser.php

<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
            align-content: center;
        }

        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position:fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }
        .logout
        {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'manipulate.php';">&larr; Go Back</button>
        <h1 class="ol">Remove Existing User</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>

<body>
    <div class="container">
        <h1>Select Privilage</h1>
        <form action="DelUsers.php" method="POST">
            <select id="usertype" name="usertype">
                <option value="user">User</option>
                <option value="moderator">Approver</option>
                <option value="admin">Admin</option>
            </select>
            <input type="submit" value="Submit">
        </form>
    </div>
</body>

</html>

runfirst.php

<?php
    $servername = "localhost";
    $username = "root";
    $password = "";
    $conn = new mysqli($servername, $username, $password);
    $CDB = "CREATE DATABASE DB";
    $UDB = "USE DB";
    $conn->query($CDB);
    $conn->query($UDB);
    $createU = "CREATE TABLE User(UN VARCHAR(25) NOT NULL primary key, PD VARCHAR(20) NOT NULL,EID VARCHAR(20) NOT NULL,Phone VARCHAR(20) NOT NULL)";
    $sqlinsertU = "INSERT INTO User VALUES ('admin','admin','admin@gmail.com','9999999999')";
    $displayU = "SELECT * FROM User";
    $conn->query($createU);
    $conn->query($sqlinsertU);
    $conn->query($displayU);
    ?>

selectCrop.php

<html>
    <head>
        <title> CROP DATA </title>
    </head>
    <body>
    <?php
    $servername = "localhost";
    $username = "root";
    $password = "";

    $dropcrop = "DROP TABLE castorpests";
                                                                            
    $createcastordisease= "CREATE TABLE castorpests(Id int(25) NOT NULL primary key, PName VARCHAR(30) NOT NULL, SCName Varchar(30) NOT NULL)";

    
    $castordiseaseinsert = "INSERT INTO castorpests VALUES (101,'Seedling blight', 'Phytophthora parasitica'),
                                            (102,'Rust','Melampsora ricini'),
                                            (103,'Leaf blight','Alternaria ricini'),
                                            (104,'Brown leaf spot','Cercospora ricinella'),
                                            (105,'Powdery mildew','Leveillula taurica'),
                                            (106,'Stem rot', 'Macrophomina phaseolina'),
                                            (107,'Bacterial leaf spot','Xanthomonas campestris pv. ricinicola'),
                                            (108,'Wilt','Fusarium oxysporum'),
                                            (109,'Alternaria Blight','Alternaria ricini Y'),
                                            (110,'Root rot / Charcoal Rot / Die back','Macrophomina phaseolina'),
                                            (111,'Fusarium wilt','Fusarium oxysporum f. sp. ricini'),
                                            (112,'Grey mold','Botrytis ricini'),
                                            (113,'Capsule rot','Cladosporium oxysporum')";

    $displaycastordisease = "SELECT * FROM castorpests";

    $conn = new mysqli($servername, $username, $password);

    if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
    }
    
    //use database
    $sql = "USE myDB";
    if ($conn->query($sql) === TRUE) 
    {
        echo "Database in use";
    } 
    else 
    {
        echo "Error connecting to database: " . $conn->error;
    }  
    
    //create table
    /*
    if($conn->query($createcastordisease) == TRUE)
    {
        echo "Table created successfully";
    }
    else 
    {
        echo "Error creating table: " . $conn->error;
    }
    

    //insert data
    if($conn->query($castorinsertdisease)==TRUE)
    {
        echo "Inserted into table successfully";
    }
    else 
    {
        echo "Error inserting data into CROP";
    }
    */
    //dislpay details   
    $result = $conn->query($displaycastordisease);
    echo "DIeases occuring in castor<br>";
    while($row = $result->fetch_assoc()) 
        echo "Id: " . $row["Id"]. " - disease: " . $row["PName"]. " - Scientific Name" . $row["SCName"] . "<br>";    
    ?>

    </body>
</html>

submit.php

<?php
session_start();

// Check if user is logged in
if (!isset($_SESSION['UN'])) {
    header("Location:index.php");
    exit;
}

require('DBinfo.php');
$_SESSION['Name'] = $_POST['Name'];
$_SESSION['SN'] = $_POST['SN'];
$cn=$_SESSION['Crop'];
$hs=$_SESSION['hs'];
$tb=$cn.$hs;
////////////////////////////////////////////////////////////////////////////////
//Author: Satya Sreekar Pattaswmi                                             //
//Date: 7th June 2023                                                         //
//Desc: This is the backend for adding more pests and diseases to the table   //
//email: satyasreekarpattaswami@gmail.com                                     //
////////////////////////////////////////////////////////////////////////////////

// Build the SQL query according to the selected user type
if ($_SESSION['hs'] != 'ND') {
    $sql = "INSERT INTO  $tb(PName, SCName) VALUES ('" . $_SESSION['Name'] . "', '" . $_SESSION['SN'] . "')";
}
else{
    $sql = "INSERT INTO nutrients(name) VALUES('" . $_SESSION['Name'] . "')";
}

// Execute the query
if ($conn->query($sql) === TRUE) {
    $message = 'Record created successfully';
} else {
    $message = "'Error:' . $sql . '<br>' . $conn->error";
}
?>

<!DOCTYPE html>
<html>
<head>
    <title>ADD USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        p {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        button
        {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><?=$message;?></h1>
        <center><button onclick="window.location.href = 'manipulate.php';">Home</button></center>
        <br>
        <center><button onclick="window.location.href = 'logout.php';">Logout</button></center>
        
    </div>
</body>
</html>


submitusers.php

<?php
session_start();

// Check if user is logged in
if (!isset($_SESSION['UN'])) {
    header("Location:index.php");
    exit;
}

require('DBinfo.php');
$_SESSION['Uid'] = $_POST['Uid'];
$_SESSION['pwd'] = $_POST['pwd'];
$table = "";

switch ($_SESSION['usertype']) {
    case "User":
        $table = "user";
        break;
    case "Moderator":
        $table = "moderator";
        break;
    case "Admin":
        $table = "admin";
        break;
    }
$u=$_SESSION['Uid'];
$query = "SELECT * FROM $table WHERE Uid ='$u'";

$result = $conn->query($query);

if ($result->num_rows == 0) {

// Build the SQL query according to the selected user type
if ($_SESSION['usertype'] == 'User') {
    $sql = "INSERT INTO user (Uid, pd) VALUES ('" . $_SESSION['Uid'] . "', '" . $_SESSION['pwd'] . "')";
} elseif ($_SESSION['usertype'] == 'Moderator') {
    $_SESSION['spz'] = $_POST['spz'];
    $sql = "INSERT INTO moderator (Uid, pd, spz) VALUES ('" . $_SESSION['Uid'] . "', '" . $_SESSION['pwd'] . "', '" . $_SESSION['spz'] . "')";
} elseif ($_SESSION['usertype'] == 'Admin') {
    $sql = "INSERT INTO admin (Uid, pd) VALUES ('" . $_SESSION['Uid'] . "', '" . $_SESSION['pwd'] . "')";
}

// Execute the query
if ($conn->query($sql) === TRUE) {
    $message = "New record created successfully";
} else {
    $message = '"Error: " . $sql . "<br>" . $conn->error';
}
}
else
{
    echo "<script>alert('User Already Exists! Try Again')</script>";
    echo "<script>location.href='uploadusers.php'</script>";
}
?>
<!DOCTYPE html>
<html>
<head>
    <title>ADD USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        p {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        button
        {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Add Users</h1>
        <p><?php echo $message; ?></p>
        <center><button onclick="window.location.href = 'manipulate.php';">Home</button></center>
        <br>
        <center><button onclick="window.location.href = 'logout.php';">Logout</button></center>
        
    </div>
</body>
</html>


transferdata.php

<?php
session_start ();

if (!isset($_SESSION['UN']))
{
    header("location:index.php");
    exit;
}
// Connect to the database
require('DBinfo.php');

$id=$_POST['id'];
$sql = "INSERT INTO permdb (User ,CROP, MONTH, YEAR, `CROP STAGE`, `PARTS-AFFECTED`, `DEVICE/SHOT`, SEASON, STATE, PORD, AREA, BACKGROUND, PORDNAME, IMGCONTAINS, STAGE, IMAGE)
SELECT User, CROP, MONTH, YEAR, `CROP STAGE`, `PARTS-AFFECTED`, `DEVICE/SHOT`, SEASON, STATE, PORD, AREA, BACKGROUND, PORDNAME, IMGCONTAINS, STAGE, IMAGE FROM tempdb WHERE IName =". $id;
$result = $conn->query($sql);
$sql = "DELETE FROM tempdb WHERE IName =" . $id;
$result = $conn->query($sql);
// if ($conn->affected_rows > 0) {
//     echo "Record deleted successfully" . $sql;
// } else {
//     echo "Error deleting record: " . $sql . $conn->error;
// }
echo  "
<html>
    <style>
    html
    {
        background-color:cornsilk;
    }
    h1
    {
        margin-top:25%;
    }
    </style>
    <body>
        <center>
            <h1>
                Success
            </h1>
        </center>
    </body>
</html>
";
header('Refresh:1;URL=display.php');
?>

upload.php

<?php
session_start();
if (!isset($_SESSION['UN'])) {
  header("location:index.php");
  exit;
}
// Connect to the database
require('DBinfo.php');
try{
//Fetching Data from imup.php
$un = $_SESSION['UN'];
$_SESSION['Efr'] = (@$_POST['Efr']);
$_SESSION['Desc'] = @$_POST['Desc'];
$_SESSION['bg'] = $_POST['bg'];
$_SESSION['Stage'] = @$_POST['Stage'];
$crop = $_SESSION['CROP'];
$month = $_SESSION['month'];
$year = $_SESSION['year'];
$cs = $_SESSION['cs'];
$part = $_SESSION['part'];
$device = $_SESSION['device'];
$season = $_SESSION['season'];
$state = $_SESSION['state'];
$pord = $_SESSION['PORD'];
$area = $_SESSION['Area'];
$bg = $_SESSION['bg'];
if ($_SESSION['PORD'] != 'pest' || $_SESSION['PORD'] != 'disease') {
  $pordname = urldecode($_SESSION['Efr']);
} else {
  $pordname = "N/A";
}
if ($_SESSION['PORD'] != 'pest') {
  $imagecont = "N/A";
  $stage = "N/A";
} else {
  $imagecont = $_SESSION['Desc'];
  $stage = urldecode($_SESSION['Stage']);
}

}catch (PDOException $e) {
  echo "Fetching Data failed: " . $e->getMessage();
  exit;
}
// Check if the form has been submitted
try{


if (isset($_FILES['images'])) {
  // Loop through all uploaded files
  for ($i = 0; $i < count($_FILES['images']['name']); $i++) {
    $image = $_FILES['images']['tmp_name'][$i];
    $image_name = $_FILES['images']['name'][$i];
    $image_size = $_FILES['images']['size'][$i];
    $image_type = $_FILES['images']['type'][$i];

    // Check if the image is greater than 1 MiB
    if ($image_size > 1048576) {
      // Load the image
      if ($image_type === 'image/jpeg' || $image_type === 'image/jpg') {
        $source_image = imagecreatefromjpeg($image);
      } elseif ($image_type === 'image/png') {
        $source_image = imagecreatefrompng($image);
      } elseif ($image_type === 'image/gif') {
        $source_image = imagecreatefromgif($image);
      } else {
        die('Unsupported image type: ' . $image_type);
      }

      // Get the current dimensions of the image
      $width = imagesx($source_image);
      $height = imagesy($source_image);

      // Calculate the new dimensions to resize the image
      $new_width = $width / 2;
      $new_height = $height / 2;

      // Create a new image with the new dimensions
      $destination_image = imagecreatetruecolor($new_width, $new_height);

      // Resize the image
      imagecopyresampled($destination_image, $source_image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

      // Save the compressed image to a temporary file
      $temp_file = tempnam(sys_get_temp_dir(), 'compressed_image_');
      if ($image_type === 'image/jpeg' || $image_type === 'image/jpg') {
        imagejpeg($destination_image, $temp_file);
      } elseif ($image_type === 'image/png') {
        imagepng($destination_image, $temp_file);
      } elseif ($image_type === 'image/gif') {
        imagegif($destination_image, $temp_file);
      }

      // Read the binary data of the compressed image
      $data = file_get_contents($temp_file);

      // Delete the temporary file
      unlink($temp_file);
    } else {
      // Read the binary data of the original image
      $data = file_get_contents($image);
    }

    // Escape the binary data to prevent SQL injection
    $data = mysqli_real_escape_string($conn, $data);

    // Insert the image into the database               
    $sql = "INSERT INTO tempdb (`User`,`CROP`, `MONTH`, `YEAR`, `CROP STAGE`,`PARTS-AFFECTED`, `DEVICE/SHOT`, `SEASON`, `STATE`, `PORD`, `AREA`, `BACKGROUND`, `PORDNAME`, `IMGCONTAINS`, `STAGE`, `IMAGE`)
                       VALUES ('$un','$crop' ,'$month','$year','$cs'       ,'$part'          ,'$device'     ,'$season','$state','$pord','$area','$bg'       ,'$pordname','$imagecont','$stage', '$data')";
    mysqli_query($conn, $sql);
  }
}
}catch (PDOException $e) {
  echo "Image Resizing failed: " . $e->getMessage();
  exit;
}
?>
<html>

<body>
  <style>
    html {
      background-color: cornsilk;
    }

    h1 {
      margin-top: 15%;
    }

    div {
      background-color: white;
      width: 20%;
      height: 20%;
      border-radius: 5%;
    }

    .button {
      display: inline-block;
      padding: 10px 20px;
      font-size: 16px;
      font-weight: bold;
      text-align: center;
      text-decoration: none;
      background-color: rgb(7, 138, 7);
      color: white;
      border: solid;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
      margin-top: 6%
    }

    button:hover {
      opacity: 0.7;
    }

    button:active {
      opacity: 0.6;
    }
  </style>
  <center>
    <h1>
      Upload Sucessful
    </h1>
    <div>
      <h2><a href="User.php" class="button">Upload More Images</a></h2>
      <h2 class="a"><a href="logout.php" class="button">Logout</a></h2>
    </div>
  </center>
</body>

</html>

uploadcrop.php

<?php
require 'DBinfo.php';
$_SESSION['cn'] = $_POST['cn'];
$cn = $_SESSION['cn'];

$stmt = $conn->prepare("INSERT INTO crop (CName) VALUES (?)");
$stmt->bind_param("s", $cn);

// Execute the statement
$stmt->execute();

// Create the table if it doesn't exist
$tableName = $cn . "pest";
$sql = "CREATE TABLE IF NOT EXISTS $tableName (
            Id INT(11) AUTO_INCREMENT PRIMARY KEY,
            PName VARCHAR(255),
            SCName VARCHAR(255)
        )";
$conn->query($sql);
// Create the table if it doesn't exist
$tableName = $cn . "disease";
$sql = "CREATE TABLE IF NOT EXISTS $tableName (
            Id INT(11) AUTO_INCREMENT PRIMARY KEY,
            PName VARCHAR(255),
            SCName VARCHAR(255)
        )";
$conn->query($sql);
// Close the statement and database connection
$stmt->close();
$conn->close();

?>
<html>

<body>
    <style>
        html {
            background-color: cornsilk;
        }

        h1 {
            margin-top: 15%;
        }

        div {
            background-color: white;
            width: 20%;
            height: 20%;
            border-radius: 5%;
        }

        .button {
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            background-color: rgb(7, 138, 7);
            color: white;
            border: solid;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 6%
        }

        button:hover {
            opacity: 0.7;
        }

        button:active {
            opacity: 0.6;
        }
    </style>
    <center>
        <h1>
            Upload Sucessful
        </h1>
        <div>
            <h2><a href="manipulate.php" class="button">Home</a></h2>
            <h2 class="a"><a href="logout.php" class="button">Logout</a></h2>
        </div>
    </center>
</body>

</html>


uploadusers.php

<?php
session_start();
require('DBinfo.php');
$sql = "SELECT * FROM crop";
if (!isset($_SESSION['UN'])) {
    header("location:index.php");
    exit;
}

$_SESSION['usertype'] = $_POST['usertype'];
?>

<html>

<head>
    <title>ADD USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        label {
            margin-bottom: 10px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="password"],
        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
        }

        input[type="text"]:focus,
        input[type="password"]:focus,
        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,
        input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,
        input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }

        .logout {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'addusers.php';">&larr; Go Back</button>
        <h1 class="ol">Create New User</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>

<body>
    <div class="container">
        <h1>Create Users</h1>
        <form action="submitusers.php" method="POST">
            <label for="Uid">ID:</label>
            <input type="text" name="Uid" id="Uid" pattern="[a-zA-Z0-9]+" required>

            <label for="pwd">Password:</label>
            <input type="text" name="pwd" id="pwd" pattern="[a-zA-Z0-9]+" required>

            <?php
            if ($_SESSION['usertype'] == 'Moderator') {
                echo '
                    <label for="spz">Specialisation:</label>
                    <select id="spz" name="spz">';
                if ($result = $conn->query($sql)) {
                    foreach ($result as $row) {
                        $Crop = $row['CName'];
                        echo "<option value='".$Crop."pest'>".$Crop."pest</option>";
                        echo "<option value='".$Crop."disease'>".$Crop."disease</option>";
                    }
                    echo "</select>";
        }
    }
            ?>
            <input type="submit" value="Submit">
        </form>
    </div>
</body>

</html>

Upro.php

<?php

session_start ();
if (!isset($_SESSION['UN']))
{
    header("location:index.php");
    exit;
    
}
    require('DBinfo.php');

$_SESSION['CROP'] =  $_POST["Crop"];
$_SESSION['PORD'] = $_POST["pord"];
$_SESSION['month'] = $_POST["month"];
$_SESSION['year'] = $_POST["year"];
$_SESSION['cs'] =  $_POST["cstage"];
$_SESSION['state'] = $_POST["state"];
$_SESSION['part'] = $_POST["part"];
$_SESSION['device'] = $_POST["device"];
$_SESSION['season'] = $_POST["season"];
$_SESSION['Area'] = $_POST["Area"];
if(!isset($_SESSION['id']))
{
    header("location:imup.php");
}
else
{
    header("location:imed.php");
}
 ?>

User.css

html {
    background: cornsilk;
    height: 100%;
}

h1 {
    font-size: 1.5em;
    color: black;
    -webkit-text-stroke: 1px black;
    -webkit-text-fill-color: white;
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    margin-top: 0.5em;
    margin-bottom: 0.67em;
}

select {
    width: 100%;
    padding: 0.67em 1em;
    border-radius: 5px;
    background-color: white;
}

h2, h3 {
    margin: 1%;
    font-size: 1em;
    text-align: center;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    margin: 0;
}

.heading {
    display: flex;
    justify-content: space-between;
    border: 2px solid rgba(72, 172, 76, 251);
    background-color: rgba(74, 174, 78, 253);
    margin-top: 0;
    padding: 0.33em 9%;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
}

button {
    background-color: rgb(54, 157, 63);
    padding: 0.23em 2%;
    color: white;
    font-size: 1em;
    border: none;
    transition: border 1ms;
}

button:hover {
    opacity: 0.7;
    cursor: pointer;
}

button:active {
    opacity: 0.5;
}

th, td {
    padding: 0.15em 1%;
}

table {
    border-spacing: 1em;
    width: 100%;
}

input[type=submit] {
    background-color: rgb(7, 138, 7);
    border-radius: 15px;
    border: none;
    color: rgb(255, 255, 255);
    padding: 0.5em 5%;
    margin-top: 2.5%;
    border-radius: 5px;
    text-decoration: none;
    cursor: pointer;
}

input[type=submit]:hover {
    opacity: 0.7;
}

input[type=submit]:active {
    opacity: 0.6;
}

.l {
    margin-left: 1em;
    width: 25%;
}

#box {
    border: 2px solid rgb(0, 0, 0);
    position: relative;
    text-align: center;
    padding: 3%;
    padding-top: 10px;
    padding-bottom: 2.5%;
    padding-left: 2em;
    padding-right: 2em;
    width: 50rem;
    margin: 2.5% auto;
    background: white;
    border-radius: 10px;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
}

/* Media Queries for Mobile Devices */
@media only screen and (max-width: 600px) {
    h1 {
        font-size: 1.2em;
    }

    select {
        padding: 0.5em;
    }

    h2, h3 {
        font-size: 0.8em;
    }

    .heading {
        flex-direction: column;
        align-items: center;
    }

    /* Adjust the green background element */
    .heading {
        padding: 0.33em 5%;
        width: 100vw;
        justify-content: center;
        box-sizing: border-box;
    }

    button {
        padding: 0.2em 1%;
        font-size: 0.8em;
    }

    th, td {
        padding: 0.1em 0.5%;
    }

    input[type=submit] {
        padding: 0.4em 3%;
        margin-top: 2%;
        width: 100%;
        margin-top: 1em;
    }

    .l {
        width: 100%;
    }

    #box {
        width: 90%;
        padding: 5%;
        padding-top: 10px;
        padding-bottom: 5%;
        padding-left: 1em;
        padding-right: 1em;
        margin: 2% auto;
    }
}

User.php

<?php
    session_start();
    if (!isset($_SESSION['UN'])) {
        header("location:index.php");
        exit;
    }
    require('DBinfo.php');
    $cropQuery = "SELECT * FROM crop";
    ?>

<html>    
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submission Form</title>
    <link rel="stylesheet" href="User.css">
</head>

<body>
    <div class="heading">
        <div></div>
        <center>
            <h1>Upload Crop Details</h1>
        </center>
        <button onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
    <div id="box">
        <form action="Upro.php" method="POST">
            <table align="center" cellpadding="3px">
                <tr>
                    <td colspan="2" align="center">
                        <h2>Select Crop</h2>
                    </td>
                    <td colspan="2" align="center">
                        <h2>Select Month</h2>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select id="Crop" name="Crop">
                            <?php
                            if ($result = $conn->query($cropQuery)) {
                                foreach ($result as $row) {
                                    $crop = $row["CName"];
                                    echo '<option value="' . $crop . '">' . $crop . '</option>';
                                }
                                echo '</select></td>';
                                $result->free();
                            }
                            ?>
                    </td>
                    <td>
                        <select name="month" id="month">
                            <option value="January">January</option>
                            <option value="February">February</option>
                            <option value="March">March</option>
                            <option value="April">April</option>
                            <option value="May">May</option>
                            <option value="June">June</option>
                            <option value="July">July</option>
                            <option value="August">August</option>
                            <option value="September">September</option>
                            <option value="October">October</option>
                            <option value="November">November</option>
                            <option value="December">December</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h2>Select Year</h2>
                    </td>
                    <td colspan="2" align="center">
                        <h2>Crop Stage</h2>
                    </td>
                </tr>
                <tr>
                    <td>
                        <select name="year" id="year">
                            <option value="2015">2015</option>
                            <option value="2016">2016</option>
                            <option value="2017">2017</option>
                            <option value="2018">2018</option>
                            <option value="2019">2019</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                            <option value="2022">2022</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                            <option value="2029">2029</option>
                            <option value="2030">2030</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <select id="cstage" name="cstage">
                            <option value="Germination">Germination stage</option>
                            <option value="Seedling">Seedling stage</option>
                            <option value="Rosette">Rosette stage</option>
                            <option value="Vegetative">Vegetative stage</option>
                            <option value="Flowering">Flowering stage</option>
                            <option value="Seed Setting">Seed Setting stage</option>
                            <option value="Seed Filling">Seed Filling stage</option>
                            <option value="Ripening">Ripening stage</option>
                            <option value="Harvesting">Harvesting stage</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h3>Parts Affected</h3>
                    </td>
                    <td colspan="2" align="center">
                        <h2>Device/Shot</h2>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select id="part" name="part">
                            <option value="Leaves">Leaves</option>
                            <option value="Stem">Stem</option>
                            <option value="Flowers">Flowers</option>
                            <option value="Capsules">Capsules</option>
                            <option value="Spikes">Spikes</option>
                            <option value="Whole Plant">Whole Plant</option>
                            <option value="Flower Head">Flower Head</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <select id="device" name="device">
                            <option value="Camera-Long">Camera-Long</option>
                            <option value="Camera-CloseUp">Camera-CloseUp</option>
                            <option value="Mobile-Long">Mobile-Long</option>
                            <option value="Mobile-CloseUp">Mobile-CloseUp</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h2>Season</h2>
                    </td>
                    <td colspan="2" align="center">
                        <h3>State</h3>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select id="season" name="season" class="pageElement">
                            <option value="Kharif">Kharif</option>
                            <option value="Rabi">Rabi</option>
                            <option value="Summer">Summer</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <select id="state" name="state">
                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                            <option value="Assam">Assam</option>
                            <option value="Bihar">Bihar</option>
                            <option value="Chattisgarh">Chattisgarh</option>
                            <option value="Goa">Goa</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Haryana">Haryana</option>
                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                            <option value="Jharkhand">Jharkhand</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Kerala">Kerala</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Manipur">Manipur</option>
                            <option value="Meghalaya">Meghalaya</option>
                            <option value="Mizoram">Mizoram</option>
                            <option value="Nagaland">Nagaland</option>
                            <option value="Odisha">Odisha</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Sikkim">Sikkim</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Tripura">Tripura</option>
                            <option value="Uttarakhand">Uttarakhand</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h3>Plant Health Status</h3>
                    </td>
                    <td colspan="2" align="center">
                        <h3>Place</h3>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <select name="pord" id="pord">
                            <option value="pest">Pest</option>
                            <option value="disease">Disease</option>
                            <option value="NaturalEnemy">Natural Enemy</option>
                            <option value="Nutrient Defficiency">Nutrient Deficiency</option>
                            <option value="healthy">Healthy</option>
                        </select>
                    </td>
                    <td colspan="2" align="center">
                        <input type="text" name="Area" id="Area" oninput="this.value=this.value.replace(/[^a-zA-Z]/g,'');" required>
                    </td>
                </tr>
                <tr>
                    <td align="center" colspan="4">
                        <input type="submit" value="Next">
                    </td>
                </tr>
            </table>
        </form>
    </div>
</body>

</html>


validation.php

<?php
require 'DBinfo.php';

$un = $_POST["UserName"];
$pwd = $_POST["password"];
$rl = $_POST["role"];

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Prepare the query based on the role
$query = "";
$table = "";

switch ($rl) {
    case "User":
        $table = "user";
        break;
    case "Moderator":
        $table = "moderator";
        break;
    case "Admin":
        $table = "admin";
        break;
    default:
        echo "<script>alert('User Not found! Try Again')</script>";
        echo "<script>location.href='index.php'</script>";
}

$query = "SELECT * FROM $table WHERE Uid = '$un'";

$result = $conn->query($query);

if ($result->num_rows > 0) {
    $row = $result->fetch_assoc();
    if ($row["pd"] === $pwd) {
        session_start();
        $_SESSION['UN'] = $un;
        $_SESSION['Role'] = $rl;
        if($rl=="Moderator"){
            $_SESSION['spz']=$row['spz'];
        }

        switch ($rl) {
            case "User":
                header('Location: User.php');
                break;
            case "Moderator":
                $string = $_SESSION['spz'];
                $pattern = '/(.+)(pest|disease)/';
                if (preg_match($pattern, $string, $matches)) {
                    $b = $matches[1];
                    $pe = $matches[2];
                    } 
                    else {
                    echo "No match found.";
                    }

                header('Location: display.php?crop='.$b.'&pord='.$pe);
                break;
            case "Admin":
                header('Location: manipulate.php');
                break;
        }
    } else {
        echo "<script>alert('Incorrect Password! Try Again')</script>";
        echo "<script>location.href='index.php'</script>";
    }
} else {
    echo "<script>alert('User Not found! Try Again')</script>";
    echo "<script>location.href='index.php'</script>";
}
?>


viewcrop.php

<?php
session_start();
require('DBinfo.php');
$sql = "SELECT * FROM crop";
// Redirect to index.php if user is not logged in
if (!isset($_SESSION['UN'])) {
    header("location: index.php");
    exit;
}
?>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIEW CROPS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        table {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        td {
            font-size: large;
            text-align: center;
        }
        th
        {
            font-size: x-large;
        }

        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
            align-content: center;
        }

        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,
        input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,
        input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }

        .logout {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'manipulate.php';">&larr; Go Back</button>
        <h1 class="ol">View Crops</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>

<body>
    <div class="container">
        <h1>Avalable Crops</h1>
        <table border="0">
            <tr>
                <th>ID</th>
                <th>Crop</th>
            </tr>
            <?php
            if ($result = $conn->query($sql)) {
                foreach ($result as $row) {
                    $Crop = $row['CName'];
                    $ID = $row['Id'];
                    echo "<tr><td>" . $ID . "</td><td>" . $Crop . "</td></tr>";
                }
                $result->free();
            }
            ?>
        </table>
    </div>
</body>

</html>

viewuser.php

<?php
session_start();
require('DBinfo.php');

// Redirect to index.php if user is not logged in
if (!isset($_SESSION['UN'])) {
    header("location: index.php");
    exit;
}
?>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIEW USERS</title>
    <style>
        body {
            background: cornsilk;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            border: 2px solid rgba(72, 172, 76, 251);
            background-color: whitesmoke;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        select {
            margin-bottom: 20px;
            appearance: none;
            padding: 10px;
            border: 1px solid #999;
            border-radius: 5px;
            width: 200px;
            background-color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
            align-content: center;
        }

        select:focus {
            outline: none;
            border-color: #555;
        }

        .logout,input[type="submit"] {
            padding: 10px 20px;
            background-color: #4AAF4E;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .logout,input[type="submit"]:hover {
            background-color: #429843;
        }

        .heading {
            position:fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4AAF4E;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 9999;
        }
        .logout
        {
            margin-right: 1%;
        }
    </style>
</head>
<header>
    <div class='heading'>
        <button class='logout' onclick="window.location.href = 'manipulate.php';">&larr; Go Back</button>
        <h1 class="ol">View Users</h1>
        <button class='logout' onclick="window.location.href = 'logout.php';">Logout</button>
    </div>
</header>

<body>
    <div class="container">
        <h1>Select Privilage</h1>
        <form action="getusers.php" method="POST">
            <select id="usertype" name="usertype">
                <option value="user">User</option>
                <option value="moderator">Approver</option>
                <option value="admin">Admin</option>
            </select>
            <input type="submit" value="Submit">
        </form>
    </div>
</body>

</html>

